(this["webpackJsonptrace-routes-viewer"]=this["webpackJsonptrace-routes-viewer"]||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},112:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(39),i=a.n(r),l=a(20),c=a.n(l),o=a(19),u=a(29),h=a(6),m=a(11),d=a(9),p=a(8),v=a(2),g=a(10),f=(a(105),a(106),a(40)),b=a.n(f);a(111);var E=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleItemsFilterDelete=a.handleItemsFilterDelete.bind(Object(v.a)(a)),a.handleItemsFilterClear=a.handleItemsFilterClear.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleItemsFilterDelete",value:function(e){this.props.onItemsFilterDelete(this.props.itemsFilterID,e.target.getAttribute("itemID"))}},{key:"handleItemsFilterClear",value:function(){this.props.onItemsFilterClear(this.props.itemsFilterID)}},{key:"render",value:function(){var e=[];if(this.props.items.length){for(var t=0;t<this.props.items.length;t++)e.push(s.a.createElement("button",{className:"selected-item text-truncate",key:"btn-"+this.props.items[t],onClick:this.handleItemsFilterDelete,itemID:this.props.items[t]},this.props.items[t]));return s.a.createElement("div",{className:"selected-items-box-wrapper"},s.a.createElement("div",{className:"selected-items-box"},s.a.createElement("div",{className:"selected-items-box-empty"},s.a.createElement("button",{onClick:this.handleItemsFilterClear},s.a.createElement("i",{className:"im im-x-mark-circle"}))),s.a.createElement(b.a,null,s.a.createElement("div",{className:"item-box-scroll-content"},e))))}return s.a.createElement("div",{className:"selected-items-box-wrapper"},s.a.createElement("div",{className:"selected-items-box"},s.a.createElement("div",{key:"item-box-empty",className:"no-data-container"},s.a.createElement("span",{className:"no-data"},"No items selected"))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSearchQueryChange=a.handleSearchQueryChange.bind(Object(v.a)(a)),a.handleSearchBarReset=a.handleSearchBarReset.bind(Object(v.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(v.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(v.a)(a)),a.handleArrowUp=a.handleArrowUp.bind(Object(v.a)(a)),a.handleArrowDown=a.handleArrowDown.bind(Object(v.a)(a)),a.handleItemPressed=a.handleItemPressed.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSearchQueryChange",value:function(e){this.props.onSearchBarChange(e.target.value)}},{key:"handleSearchBarReset",value:function(){this.props.onSearchBarChange("")}},{key:"handleArrowUp",value:function(){var e=this.props,t=e.itemFocused,a=e.paginateBy,n=e.currentPage,s=e.maxPage,r=e.onJumpToPageChange,i=e.onItemFocused,l=e.tail,c=t,o={value:1,mask:"1"};t>0?i(--c):n.value>1?(o.value=n.value-1,o.mask=String(n.value-1),r(null,o,s),i(a-1)):(o.value=s,o.mask=String(s),r(null,o,s),i(l-1))}},{key:"handleArrowDown",value:function(){var e=this.props,t=e.itemFocused,a=e.paginateBy,n=e.currentPage,s=e.maxPage,r=e.onJumpToPageChange,i=e.onItemFocused,l=e.tail,c=t,o={value:1,mask:"1"};n.value<s?t<a-1?i(++c):(o.value=n.value+1,o.mask=String(n.value+1),r(null,o,s),i(0)):t<l-1?i(++c):(o.value=1,o.mask=String(1),r(null,o,s),i(0))}},{key:"handleItemPressed",value:function(){this.props.onItemPressed(this.props.itemFocused)}},{key:"handleKeyDown",value:function(e){38===e.keyCode?this.handleArrowUp():40===e.keyCode?this.handleArrowDown():13===e.keyCode&&this.handleItemPressed()}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.props.onItemPressed(null)}},{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-searchbar"},s.a.createElement("span",null,"Search"),s.a.createElement("input",{className:"items-filter-searchbar-input",type:"text",onChange:this.handleSearchQueryChange,value:this.props.searchQuery,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}),s.a.createElement("button",{onClick:this.handleSearchBarReset,className:"reset-searchbar-btn"},s.a.createElement("i",{className:"im im-x-mark-circle"})))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleFieldCLick=a.handleFieldCLick.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleFieldCLick",value:function(e){var t=this.props.sortRules;"name"===e.target.parentElement.getAttribute("itemID")?(t.name.active=!0,t.count.active=!1,t.name.asc=!this.props.sortRules.name.asc):(t.count.active=!0,t.name.active=!1,t.count.asc=!this.props.sortRules.count.asc),t.matchIndex.active=!1,this.props.onSortRulesChange(t)}},{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-sortbar"},s.a.createElement("button",{onClick:this.handleFieldCLick,itemID:"name",className:"items-filter-sortbar-field name"+(this.props.sortRules.name.asc?"":" rotated")},s.a.createElement("h5",{className:this.props.sortRules.name.active?"active":""},"Name"),s.a.createElement("span",null,s.a.createElement("i",{className:"im im-arrow-up"}))),s.a.createElement("button",{onClick:this.handleFieldCLick,itemID:"count",className:"items-filter-sortbar-field count"+(this.props.sortRules.count.asc?"":" rotated")},s.a.createElement("h5",{className:this.props.sortRules.count.active?"active":""},"Count"),s.a.createElement("span",null,s.a.createElement("i",{className:"im im-arrow-up"}))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleItemFocusedChange=a.handleItemFocusedChange.bind(Object(v.a)(a)),a.handleJumpToPage=a.handleJumpToPage.bind(Object(v.a)(a)),a.handleItemsFilterSelect=a.handleItemsFilterSelect.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleJumpToPage",value:function(e){this.props.onJumpToPageChange(e)}},{key:"handleItemFocusedChange",value:function(e){void 0!==e&&this.props.onItemFocused(Number(e))}},{key:"handleItemsFilterSelect",value:function(e){this.props.onItemsFilterSelect(this.props.filterID,e)}},{key:"sortItems",value:function(e){return this.props.sortRules.matchIndex.active?(this.props.sortRules.matchIndex.asc?(e.sort((function(e,t){return e.count>t.count?1:-1})),e.sort((function(e,t){return e.weight>t.weight?1:-1}))):(e.sort((function(e,t){return e.count>t.count?1:-1})),e.sort((function(e,t){return e.weight<t.weight?1:-1}))),e):(this.props.sortRules.name.active?this.props.sortRules.name.asc?(e.sort((function(e,t){return e.count<t.count?1:-1})),e.sort((function(e,t){return e.name>t.name?1:-1}))):(e.sort((function(e,t){return e.count<t.count?1:-1})),e.sort((function(e,t){return e.name<t.name?1:-1}))):this.props.sortRules.count.asc?(e.sort((function(e,t){return e.name>t.name?1:-1})),e.sort((function(e,t){return e.count>t.count?1:-1}))):(e.sort((function(e,t){return e.name>t.name?1:-1})),e.sort((function(e,t){return e.count<t.count?1:-1}))),e)}},{key:"paginateItems",value:function(e){var t=this.props.currentPage.value;return--t,e.slice(t*this.props.paginateBy,(t+1)*this.props.paginateBy)}},{key:"prepareRows",value:function(e){var t=this.paginateItems(this.sortItems(e)),a=[];if(e.length)for(var n=0;n<t.length;n++){var r=t[n];a.push(s.a.createElement(C,{key:r.name,name:r.name,count:r.count,notHere:r.notHere,weight:r.weight,searchQuery:this.props.searchQuery,itemIdx:n,focused:n===this.props.itemFocused,pressed:n===this.props.itemPressed,onItemsFilterSelect:this.handleItemsFilterSelect,onItemFocusedChange:this.handleItemFocusedChange}))}else a=[s.a.createElement("li",{key:"no-data",className:"filter-item no-data"},s.a.createElement("span",null,"No data"))];return a}},{key:"render",value:function(){return s.a.createElement("div",{className:""},s.a.createElement("div",{className:"filter-content"},s.a.createElement("ul",{id:"filter-items-shown-"+this.props.filterID,className:"filter-content-list"},this.prepareRows(this.props.items))),s.a.createElement(O,{currentPage:this.props.currentPage,maxPage:this.props.maxPage,onJumpToPageChange:this.props.onJumpToPageChange}),s.a.createElement(w,{statistics:this.props.statistics}))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleItemFocusedChange=a.handleItemFocusedChange.bind(Object(v.a)(a)),a.handleItemsFilterSelect=a.handleItemsFilterSelect.bind(Object(v.a)(a)),a.highlightSearchQuery=a.highlightSearchQuery.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleItemFocusedChange",value:function(){this.props.onItemFocusedChange(this.props.itemIdx)}},{key:"handleItemsFilterSelect",value:function(){this.props.onItemsFilterSelect(this.props.name)}},{key:"highlightSearchQuery",value:function(){if(this.props.searchQuery.length){for(var e=[],t=this.props.name,a=this.props.name.slice(this.props.weight,this.props.weight+this.props.searchQuery.length),n=t.split(a),r=0;r<n.length;r++)e.push(n[r]),r+1!==n.length&&e.push(s.a.createElement("span",{key:r+a,className:"search-query-highlight"},a));return e}return s.a.createElement("span",null,this.props.name)}},{key:"render",value:function(){var e=[this.props.focused?"focused":"",this.props.pressed?"pressed":"",this.props.notHere?"notHere":""].join(" ");return s.a.createElement("li",{key:this.props.name,className:" "+e,value:this.props.name,onClick:this.handleItemsFilterSelect,onMouseEnter:this.handleItemFocusedChange},s.a.createElement("div",{className:"filter-item-name text-truncate",title:this.props.name},s.a.createElement("span",null,this.highlightSearchQuery())),s.a.createElement("div",{className:"filter-name-count text-truncate"},s.a.createElement("span",null,this.props.count.toLocaleString())))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handlePreviousPage=a.handlePreviousPage.bind(Object(v.a)(a)),a.handleJumpToPage=a.handleJumpToPage.bind(Object(v.a)(a)),a.handleNextPage=a.handleNextPage.bind(Object(v.a)(a)),a.handleFocusOut=a.handleFocusOut.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handlePreviousPage",value:function(){var e={value:this.props.currentPage.value-1,mask:this.props.currentPage.value-1};this.handleJumpToPage(null,e)}},{key:"handleJumpToPage",value:function(e,t){this.props.onJumpToPageChange(e,t,this.props.maxPage)}},{key:"handleNextPage",value:function(){var e={value:this.props.currentPage.value+1,mask:this.props.currentPage.value+1};this.handleJumpToPage(null,e)}},{key:"handleFocusOut",value:function(){var e=this.props.currentPage;e.mask=e.value,this.handleJumpToPage(null,e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-paginator"},s.a.createElement("button",{onClick:this.handlePreviousPage},s.a.createElement("i",{className:"im im-angle-left"})),s.a.createElement("div",{className:"page-numbers"},s.a.createElement("input",{className:"items-filter-paginator-input",onChange:this.handleJumpToPage,onBlur:this.handleFocusOut,value:this.props.currentPage.mask,type:"text"}),s.a.createElement("span",null,"/"),s.a.createElement("span",null,this.props.maxPage)),s.a.createElement("button",{onClick:this.handleNextPage},s.a.createElement("i",{className:"im im-angle-right"})))}}]),t}(n.Component),w=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-statistics"},s.a.createElement("p",null,s.a.createElement("span",null,"Showing "),s.a.createElement("span",null,this.props.statistics.shownFrom," "),s.a.createElement("span",null,"to "),s.a.createElement("span",null,this.props.statistics.shownTo," "),s.a.createElement("span",null,"of "),s.a.createElement("span",null,this.props.statistics.itemsShown," "),s.a.createElement("span",null,"(",this.props.statistics.itemsTotal,") "),s.a.createElement("span",null,"records")))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={searchQuery:"",currentPage:{value:1,mask:"1"},paginateBy:10,sortRules:{name:{asc:!0,active:!1},count:{asc:!1,active:!0},matchIndex:{asc:!0,active:!1}},itemFocused:0,itemPressed:null},a.handleItemFocused=a.handleItemFocused.bind(Object(v.a)(a)),a.handleItemPressed=a.handleItemPressed.bind(Object(v.a)(a)),a.handleJumpToPage=a.handleJumpToPage.bind(Object(v.a)(a)),a.handleSortRulesChange=a.handleSortRulesChange.bind(Object(v.a)(a)),a.handleSearchQueryChange=a.handleSearchQueryChange.bind(Object(v.a)(a)),a.onTrashCanClick=a.onTrashCanClick.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleItemFocused",value:function(e){this.setState({itemFocused:e})}},{key:"handleItemPressed",value:function(e){if(null!==e){var t=document.getElementById("filter-items-shown-"+this.props.filterID).childNodes[e].getAttribute("value");this.props.onItemsFilterSelect(this.props.filterID,t)}this.setState({itemPressed:e})}},{key:"handleJumpToPage",value:function(e,t,a){if(null!==e){var n=e.target.value;t=""===n?{value:this.state.currentPage.value,mask:n}:{value:Number(n),mask:n}}(0===t.value||t.value>a)&&(0===t.value&&(t.value=a,t.mask=String(a)),t.value>a&&(t.value=1,t.mask=String(1))),this.setState({currentPage:t})}},{key:"handleSortRulesChange",value:function(e){this.setState({sortRules:e})}},{key:"handleSearchQueryChange",value:function(e){var t=this.state.sortRules;t.matchIndex.active=!!e.length,this.setState({searchQuery:e,currentPage:{value:1,mask:"1"},sortRules:t})}},{key:"onTrashCanClick",value:function(e){var t=e.target.parentElement;t.classList.contains("rotated")?t.classList.remove("rotated"):t.classList.add("rotated"),this.props.onItemsFilterClear(this.props.filterID),this.setState({searchQuery:"",currentPage:{value:1,mask:"1"},sortRules:{name:{asc:!0,active:!1},count:{asc:!1,active:!0},matchIndex:{asc:!1,active:!1}},itemFocused:0,itemPressed:null})}},{key:"filterItems",value:function(e){var t,a=[];if(this.state.searchQuery)for(var n=0;n<e.length;n++){var s=e[n],r=s.name.toLowerCase().indexOf(this.state.searchQuery);r>=0&&(s.weight=r,a.push(s))}else if(this.props.hideIPs)for(var i=0;i<e.length;i++){var l=e[i];t=l.name,/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||a.push(l)}else a=e;return a}},{key:"concatenateItems",value:function(e,t){var a=e,n=[];return e.forEach((function(e){n.push(e.name)})),t.forEach((function(e){n.indexOf(e.name)<0&&(e.notHere=!0,a.push(e))})),a}},{key:"calculateStatistics",value:function(e){if(0===e.length)return{itemsShown:e.length,itemsTotal:this.props.allItems.length,shownFrom:0,shownTo:0};var t=(this.state.currentPage.value-1)*this.state.paginateBy+1;return{itemsShown:e.length,itemsTotal:this.props.allItems.length,shownFrom:t,shownTo:t+this.state.paginateBy>e.length?e.length:t+this.state.paginateBy-1}}},{key:"calculateMaxPage",value:function(e){var t=1;return e.length&&(t=Math.ceil(e.length/this.state.paginateBy)),t}},{key:"render",value:function(){var e=this.props.items;e.length&&(e=this.filterItems(e));var t=this.props.allItems;t.length&&(t=this.filterItems(t)),e=this.concatenateItems(e,t);var a=this.calculateStatistics(e),n=this.calculateMaxPage(e);return s.a.createElement("div",{className:"items-filter"+(this.props.shownFilter?" shown":"")},s.a.createElement("div",{className:"items-filter-wrapper"},s.a.createElement("div",{className:"items-filter-header"},s.a.createElement("div",{className:"items-filter-reset"},s.a.createElement("button",{onClick:this.onTrashCanClick},s.a.createElement("i",{className:"im im-trash-can"}))),s.a.createElement("div",{className:"items-filter-title"},s.a.createElement("h3",null,this.props.title))),s.a.createElement("div",{className:"items-filter-body"},s.a.createElement(E,{items:this.props.selectedItems,onItemsFilterDelete:this.props.onItemsFilterDelete,itemsFilterID:this.props.filterID,onItemsFilterClear:this.props.onItemsFilterClear}),s.a.createElement(y,{searchQuery:this.state.searchQuery,onSearchBarChange:this.handleSearchQueryChange,itemFocused:this.state.itemFocused,paginateBy:this.state.paginateBy,currentPage:this.state.currentPage,maxPage:n,tail:e.length%this.state.paginateBy,onJumpToPageChange:this.handleJumpToPage,onItemFocused:this.handleItemFocused,onItemPressed:this.handleItemPressed}),s.a.createElement(k,{sortRules:this.state.sortRules,onSortRulesChange:this.handleSortRulesChange}),s.a.createElement(N,{filterID:this.props.filterID,searchQuery:this.state.searchQuery,items:e,allItems:t,currentPage:this.state.currentPage,onJumpToPageChange:this.handleJumpToPage,onItemFocused:this.handleItemFocused,itemFocused:this.state.itemFocused,itemPressed:this.state.itemPressed,onItemsFilterSelect:this.props.onItemsFilterSelect,statistics:a,maxPage:n,sortRules:this.state.sortRules,paginateBy:this.state.paginateBy}))))}}]),t}(n.Component),I=(a(112),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).prepareButtons=a.prepareButtons.bind(Object(v.a)(a)),a.handleShownFilterChange=a.handleShownFilterChange.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleShownFilterChange",value:function(e){var t=Number(e.target.getAttribute("itemID"));this.props.onShownFilterChange(t)}},{key:"prepareButtons",value:function(){var e=this,t=[];return this.props.itemsFilters.forEach((function(a,n){t.push(s.a.createElement("button",{id:"".concat(a.id,"-switcher"),key:a.title,className:"search-query-item"+(e.props.shownFilter===n?" active":""),onClick:e.handleShownFilterChange,itemID:n},a.title))})),t}},{key:"render",value:function(){var e=this.prepareButtons();return s.a.createElement("div",{className:"search-query-nav"},e)}}]),t}(n.Component)),j=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={shownFilter:1},a.handleShownFilterChange=a.handleShownFilterChange.bind(Object(v.a)(a)),a.remapItems=a.remapItems.bind(Object(v.a)(a)),a.handleItemsFilterSelect=a.handleItemsFilterSelect.bind(Object(v.a)(a)),a.handleItemsFilterDelete=a.handleItemsFilterDelete.bind(Object(v.a)(a)),a.handleItemsFilterClear=a.handleItemsFilterClear.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleHideShow",value:function(){for(var e=document.getElementsByClassName("search-query-container"),t=0;t<e.length;t++){var a=e[t].classList;a.contains("opened")?a.remove("opened"):a.add("opened")}}},{key:"handleShownFilterChange",value:function(e){this.setState({shownFilter:e})}},{key:"handleItemsFilterSelect",value:function(e,t){var a=this.props.query;a[e].indexOf(t)<0&&(a[e].unshift(t),this.props.onQueryChange(a))}},{key:"handleItemsFilterDelete",value:function(e,t){var a=this.props.query,n=[];a[e].forEach((function(e){String(e)!==String(t)&&n.push(e)})),a[e]=n,this.props.onQueryChange(a)}},{key:"handleItemsFilterClear",value:function(e){var t=this.props.query;t[e]=[],this.props.onQueryChange(t)}},{key:"remapItems",value:function(e){return this.props.aggregations[e].buckets.map((function(e){return{name:e.key,count:e.doc_count}}))}},{key:"render",value:function(){var e=this,t=[];return this.props.itemsFilters.forEach((function(a,n){t.push(s.a.createElement(S,{key:a.id,title:a.title,filterID:a.id,hideIPs:a.hideIPs,shownFilter:e.state.shownFilter===n,items:e.remapItems(a.id),allItems:e.props.query.IPv6?e.props.ipv6Items[a.id]:e.props.ipv4Items[a.id],selectedItems:e.props.query[a.id],onItemsFilterSelect:e.handleItemsFilterSelect,onItemsFilterDelete:e.handleItemsFilterDelete,onItemsFilterClear:e.handleItemsFilterClear}))})),s.a.createElement("div",{id:"search-query",className:"search-query-container opened"},s.a.createElement(I,{itemsFilters:this.props.itemsFilters,shownFilter:this.state.shownFilter,onShownFilterChange:this.handleShownFilterChange}),s.a.createElement("div",{className:"search-query",onMouseEnter:this.props.strikeQuery},t))}}]),t}(n.Component),P=a(82),F=a.n(P),x=(a(130),a(14)),D=a.n(x),_=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleDateTimeChange=a.handleDateTimeChange.bind(Object(v.a)(a)),a.handleEndDateBlur=a.handleEndDateBlur.bind(Object(v.a)(a)),a.handleStartDateBlur=a.handleStartDateBlur.bind(Object(v.a)(a)),a.onTrashCanClick=a.onTrashCanClick.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleDateTimeChange",value:function(e){var t=e.start,a=e.end,n=Object(o.a)({},this.props.query);n.datetimeTo=a,n.datetimeFrom=t,this.props.onQueryChange(n)}},{key:"handleEndDateBlur",value:function(e){if(e<this.props.query.datetimeFrom){var t=Object(o.a)({},this.props.query);t.datetimeTo=this.props.query.datetimeFrom,t.datetimeFrom=e,this.props.onQueryChange(t)}}},{key:"handleStartDateBlur",value:function(e){if(e>this.props.query.datetimeTo){var t=Object(o.a)({},this.props.query);t.datetimeTo=e,t.datetimeFrom=this.props.query.datetimeTo,this.props.onQueryChange(t)}}},{key:"onTrashCanClick",value:function(e){var t=e.target.parentElement;t.classList.contains("rotated")?t.classList.remove("rotated"):t.classList.add("rotated");var a=D()().utc(),n=Object(o.a)({},this.props.query);n.datetimeTo=a,n.datetimeFrom=a.clone().subtract(1,"minutes"),this.props.onQueryChange(n)}},{key:"render",value:function(){var e=this.props.strikeData;return s.a.createElement("div",{id:"time-query",className:"search-query-container opened",onMouseEnter:e},s.a.createElement("div",{className:"time-query"},s.a.createElement("div",{className:"time-query-wrapper"},s.a.createElement("div",null,s.a.createElement("div",{className:"items-filter-header"},s.a.createElement("div",{className:"items-filter-reset"},s.a.createElement("button",{onClick:this.onTrashCanClick},s.a.createElement("i",{className:"im im-trash-can"}))),s.a.createElement("div",{className:"items-filter-title"},s.a.createElement("h3",null,"Time range"))),s.a.createElement("div",null,s.a.createElement("div",{className:"time-query-labels"},s.a.createElement("div",null,s.a.createElement("span",null,"from:")),s.a.createElement("div",null,s.a.createElement("span",null,"to:"))),s.a.createElement(F.a,{dateFormat:"YYYY-MM-DD",timeFormat:"H:mm:ss",pickerClassName:"datetime-picker",startDate:this.props.query.datetimeFrom,endDate:this.props.query.datetimeTo,input:!0,utc:!0,onChange:this.handleDateTimeChange,onEndDateBlur:this.handleEndDateBlur,onStartDateBlur:this.handleStartDateBlur}))))))}}]),t}(n.Component),L=(a(131),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onIPv4Clicked=a.onIPv4Clicked.bind(Object(v.a)(a)),a.onIPv6Clicked=a.onIPv6Clicked.bind(Object(v.a)(a)),a.toggleSelection=a.toggleSelection.bind(Object(v.a)(a)),a.onTrashCanClick=a.onTrashCanClick.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"onTrashCanClick",value:function(e){var t=e.target.parentElement;t.classList.contains("rotated")?t.classList.remove("rotated"):t.classList.add("rotated"),this.toggleSelection(!1)}},{key:"toggleSelection",value:function(e){var t=Object(o.a)({},this.props.query);t.IPv6=e,this.props.onQueryChange(t)}},{key:"onIPv4Clicked",value:function(){this.toggleSelection(!1)}},{key:"onIPv6Clicked",value:function(){this.toggleSelection(!0)}},{key:"render",value:function(){var e=this.props.query.IPv6;return s.a.createElement("div",{id:"ipv-query",className:"search-query-container opened",onMouseEnter:this.props.strikeQuery},s.a.createElement("div",{className:"ipv-query"},s.a.createElement("div",{className:"ipv-query-wrapper"},s.a.createElement("div",null,s.a.createElement("div",{className:"items-filter-header"},s.a.createElement("div",{className:"items-filter-reset"},s.a.createElement("button",{onClick:this.onTrashCanClick},s.a.createElement("i",{className:"im im-trash-can"}))),s.a.createElement("div",{className:"items-filter-title"},s.a.createElement("h3",null,"IP version"))),s.a.createElement("div",{className:"ipv-content"},s.a.createElement("div",{className:"ipv-names"},s.a.createElement("div",{className:"ipv-name"},s.a.createElement("span",null,"IPv4")),s.a.createElement("div",{className:"ipv-name"},s.a.createElement("span",null,"IPv6"))),s.a.createElement("div",{className:"ipv-selections"},s.a.createElement("div",{id:"ipv4-selection",className:"ipv-selection ipv4"+(e?" hidden":" active"),onClick:this.onIPv4Clicked},s.a.createElement("div",{className:"selection-indicator"},"selected")),s.a.createElement("div",{id:"ipv6-selection",className:"ipv-selection ipv6"+(e?" active":" hidden"),onClick:this.onIPv6Clicked},s.a.createElement("div",{className:"selection-indicator"},"selected"))))))))}}]),t}(n.Component)),T=(a(132),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSearchQueryChange=a.handleSearchQueryChange.bind(Object(v.a)(a)),a.handleSearchBarReset=a.handleSearchBarReset.bind(Object(v.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(v.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(v.a)(a)),a.handleArrowUp=a.handleArrowUp.bind(Object(v.a)(a)),a.handleArrowDown=a.handleArrowDown.bind(Object(v.a)(a)),a.handleItemPressed=a.handleItemPressed.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSearchQueryChange",value:function(e){this.props.onSearchBarChange(e.target.value)}},{key:"handleSearchBarReset",value:function(){this.props.onSearchBarChange("")}},{key:"handleArrowUp",value:function(){var e=this.props,t=e.itemFocused,a=e.paginateBy,n=e.currentPage,s=e.maxPage,r=e.onJumpToPageChange,i=e.onItemFocused,l=e.tail,c=t,o={value:1,mask:"1"};t>0?i(--c):n.value>1?(o.value=n.value-1,o.mask=String(n.value-1),r(null,o,s),i(a-1)):(o.value=s,o.mask=String(s),r(null,o,s),i(l-1))}},{key:"handleArrowDown",value:function(){var e=this.props,t=e.itemFocused,a=e.paginateBy,n=e.currentPage,s=e.maxPage,r=e.onJumpToPageChange,i=e.onItemFocused,l=e.tail,c=t,o={value:1,mask:"1"};n.value<s?t<a-1?i(++c):(o.value=n.value+1,o.mask=String(n.value+1),r(null,o,s),i(0)):t<l-1?i(++c):(o.value=1,o.mask=String(1),r(null,o,s),i(0))}},{key:"handleItemPressed",value:function(){this.props.onItemPressed(this.props.itemFocused)}},{key:"handleKeyDown",value:function(e){38===e.keyCode?this.handleArrowUp():40===e.keyCode?this.handleArrowDown():13===e.keyCode&&this.handleItemPressed()}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.props.onItemPressed(null)}},{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-searchbar"},s.a.createElement("span",null,"Search"),s.a.createElement("input",{className:"items-filter-searchbar-input",type:"text",onChange:this.handleSearchQueryChange,value:this.props.searchQuery,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}),s.a.createElement("button",{onClick:this.handleSearchBarReset,className:"reset-searchbar-btn"},s.a.createElement("i",{className:"im im-x-mark-circle"})))}}]),t}(n.Component)),R=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"items-filter-statistics"},s.a.createElement("p",null,s.a.createElement("span",null,"Showing "),s.a.createElement("span",null,this.props.statistics.shownFrom," "),s.a.createElement("span",null,"to "),s.a.createElement("span",null,this.props.statistics.shownTo," "),s.a.createElement("span",null,"of "),s.a.createElement("span",null,this.props.statistics.itemsShown," "),s.a.createElement("span",null,"(",this.props.statistics.itemsTotal,") "),s.a.createElement("span",null,"records")))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handlePreviousPage=a.handlePreviousPage.bind(Object(v.a)(a)),a.handleJumpToPage=a.handleJumpToPage.bind(Object(v.a)(a)),a.handleNextPage=a.handleNextPage.bind(Object(v.a)(a)),a.handleFocusOut=a.handleFocusOut.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handlePreviousPage",value:function(){var e={value:this.props.currentPage.value-1,mask:this.props.currentPage.value-1};this.handleJumpToPage(null,e)}},{key:"handleJumpToPage",value:function(e,t){this.props.onJumpToPageChange(e,t,this.props.maxPage)}},{key:"handleNextPage",value:function(){var e={value:this.props.currentPage.value+1,mask:this.props.currentPage.value+1};this.handleJumpToPage(null,e)}},{key:"handleFocusOut",value:function(){var e=this.props.currentPage;e.mask=e.value,this.handleJumpToPage(null,e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"paths-table-paginator"},s.a.createElement("div",{className:"empty"}),s.a.createElement("button",{onClick:this.handlePreviousPage},s.a.createElement("i",{className:"im im-angle-left"})),s.a.createElement("div",{className:"page-numbers"},s.a.createElement("input",{className:"items-filter-paginator-input",onChange:this.handleJumpToPage,onBlur:this.handleFocusOut,value:this.props.currentPage.mask,type:"text"}),s.a.createElement("span",null,"/"),s.a.createElement("span",null,this.props.maxPage)),s.a.createElement("button",{onClick:this.handleNextPage},s.a.createElement("i",{className:"im im-angle-right"})),s.a.createElement("div",{className:"empty"}))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).prepareRows=a.prepareRows.bind(Object(v.a)(a)),a.sortItems=a.sortItems.bind(Object(v.a)(a)),a.handleSortFieldCLick=a.handleSortFieldCLick.bind(Object(v.a)(a)),a.handleItemFocusedChange=a.handleItemFocusedChange.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSortFieldCLick",value:function(e){var t=this.props.sortRules,a=e.currentTarget;a.getAttribute("name")===t.columnName?t.asc=!this.props.sortRules.asc:(t.asc="asc"===a.getAttribute("value"),t.columnName=a.getAttribute("name")),this.props.onSortRulesChange(t)}},{key:"handleItemFocusedChange",value:function(e){void 0!==e&&this.props.onItemFocused(Number(e))}},{key:"sortItems",value:function(e){var t=this.props,a=t.sortRules,n=t.pathsCount;if("count"===a.columnName)a.asc?e.sort((function(e,t){return n[e._source["route-sha1"]]>n[t._source["route-sha1"]]?1:-1})):e.sort((function(e,t){return n[e._source["route-sha1"]]<n[t._source["route-sha1"]]?1:-1}));else{var s=a.columnName;a.asc?e.sort((function(e,t){return(e._source[s]||"")>(t._source[s]||"")?1:-1})):e.sort((function(e,t){return(e._source[s]||"")<(t._source[s]||"")?1:-1}))}return e}},{key:"paginateItems",value:function(e){var t=this.props.currentPage.value;return--t,e.slice(t*this.props.paginateBy,(t+1)*this.props.paginateBy)}},{key:"prepareRows",value:function(e){var t=this.paginateItems(this.sortItems(e)),a=[];if(e.length)for(var n=0;n<t.length;n++){var r=t[n];a.push(s.a.createElement(B,{key:r._source["route-sha1"],searchQuery:this.props.searchQuery,itemIdx:n,item:r,count:this.props.pathsCount[r._source["route-sha1"]],odd:1===Math.abs(n%2),focused:this.props.itemFocused===n,pressed:this.props.selectedPath===r._source["route-sha1"],onItemFocusedChange:this.handleItemFocusedChange,onItemClicked:this.props.onItemPressed}))}else a=[s.a.createElement("tr",{key:"no-data",className:"filter-item no-data"},s.a.createElement("td",{colSpan:6},s.a.createElement("span",null,"No data")))];return a}},{key:"render",value:function(){var e=this.props.sortRules,t=e.columnName,a=e.asc;return s.a.createElement("div",null,s.a.createElement("table",{id:"paths-table",className:"full-width",cellSpacing:"1",cellPadding:"0"},s.a.createElement("thead",null,s.a.createElement("tr",{className:"table-head"},s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("span",null,"Path's ends"))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("span",null,"Hosts"))),s.a.createElement("th",{className:"middle"},s.a.createElement("div",{className:"table-column-name"},s.a.createElement("span",null,"Sites"))),s.a.createElement("th",{className:"middle"},s.a.createElement("div",{className:"table-column-name"},s.a.createElement("span",null,"Virtual Organisations"))),s.a.createElement("th",{className:"small"},s.a.createElement("div",{className:"table-column-name"},s.a.createElement("span",null,"Production"))),s.a.createElement("th",{className:"small"},s.a.createElement("div",{className:"table-column-name no-border"},s.a.createElement("span",null,"Count")))),s.a.createElement("tr",{className:"table-sub-head"},s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"two-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("src"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"src",value:"desc"},s.a.createElement("span",null,"Src"),s.a.createElement("span",{className:"arrow"},"src"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"}))),s.a.createElement("button",{className:"table-row-value text-center "+("dest"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"dest",value:"desc"},s.a.createElement("span",null,"Dest"),s.a.createElement("span",{className:"arrow"},"dest"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"two-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("src_host"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"src_host",value:"desc"},s.a.createElement("span",null,"Src"),s.a.createElement("span",{className:"arrow"},"src_host"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"}))),s.a.createElement("button",{className:"table-row-value text-center "+("dest_host"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"dest_host",value:"desc"},s.a.createElement("span",null,"Dest"),s.a.createElement("span",{className:"arrow"},"dest_host"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"two-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("src_site"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"src_site",value:"desc"},s.a.createElement("span",null,"Src"),s.a.createElement("span",{className:"arrow"},"src_site"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"}))),s.a.createElement("button",{className:"table-row-value text-center "+("dest_site"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"dest_site",value:"desc"},s.a.createElement("span",null,"Dest"),s.a.createElement("span",{className:"arrow"},"dest_site"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"two-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("src_VO"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"src_VO",value:"desc"},s.a.createElement("span",null,"Src"),s.a.createElement("span",{className:"arrow"},"src_VO"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"}))),s.a.createElement("button",{className:"table-row-value text-center "+("dest_VO"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"dest_VO",value:"desc"},s.a.createElement("span",null,"Dest"),s.a.createElement("span",{className:"arrow"},"dest_VO"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"two-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("src_production"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"src_production",value:"desc"},s.a.createElement("span",null,"Src"),s.a.createElement("span",{className:"arrow"},"src_production"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"}))),s.a.createElement("button",{className:"table-row-value text-center "+("dest_production"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"dest_production",value:"desc"},s.a.createElement("span",null,"Dest"),s.a.createElement("span",{className:"arrow"},"dest_production"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))),s.a.createElement("th",null,s.a.createElement("div",{className:"table-column-name"},s.a.createElement("div",{className:"one-lines-cell"},s.a.createElement("button",{className:"table-row-value text-center "+("count"!==t||a?"":"rotated"),onClick:this.handleSortFieldCLick,name:"count",value:"desc"},s.a.createElement("span",null,"Records"),s.a.createElement("span",{className:"arrow"},"count"===t?s.a.createElement("i",{className:"im im-arrow-up"}):s.a.createElement("i",{className:"im im-minus"})))))))),s.a.createElement("tbody",null,this.prepareRows(this.props.paths))),s.a.createElement("div",null,s.a.createElement(q,{currentPage:this.props.currentPage,maxPage:this.props.maxPage,onJumpToPageChange:this.props.onJumpToPageChange}),s.a.createElement(R,{statistics:this.props.statistics})))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleItemFocusedChange=a.handleItemFocusedChange.bind(Object(v.a)(a)),a.highlightSearch=a.highlightSearch.bind(Object(v.a)(a)),a.handleItemCLicked=a.handleItemCLicked.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleItemCLicked",value:function(){this.props.onItemClicked(this.props.itemIdx)}},{key:"handleItemFocusedChange",value:function(){this.props.onItemFocusedChange(this.props.itemIdx)}},{key:"highlightSearch",value:function(e){if(this.props.searchQuery.length){var t=e.toLowerCase().indexOf(this.props.searchQuery.toLowerCase());if(t>=0){for(var a=[],n=e.slice(t,t+this.props.searchQuery.length),r=e.split(n),i=0;i<r.length;i++)a.push(r[i]),i+1!==r.length&&a.push(s.a.createElement("span",{key:i+n,className:"search-query-highlight"},n));return a}return e}return e}},{key:"render",value:function(){var e=this.props.item._source;return s.a.createElement("tr",{onMouseEnter:this.handleItemFocusedChange,onClick:this.handleItemCLicked,itemID:e["route-sha1"],className:"path-table-row"+(this.props.odd?" odd":" even")+(this.props.focused?" focused":"")+(this.props.pressed?" pressed":"")},s.a.createElement("td",{className:"border-left"},s.a.createElement("div",{className:"two-lines-cell large"},s.a.createElement("p",{className:"table-row-value source text-left text-truncate",title:e.src},s.a.createElement("span",null,this.highlightSearch(e.src?e.src:"-"))),s.a.createElement("p",{className:"table-row-value destination text-left text-truncate",title:e.dest},s.a.createElement("span",null,this.highlightSearch(e.dest?e.dest:"-"))))),s.a.createElement("td",null,s.a.createElement("div",{className:"two-lines-cell large"},s.a.createElement("p",{className:"table-row-value source text-left text-truncate",title:e.src_host},this.highlightSearch(e.src_host?e.src_host:"-")),s.a.createElement("p",{className:"table-row-value destination text-left text-truncate",title:e.dest_host},this.highlightSearch(e.dest_host?e.dest_host:"-")))),s.a.createElement("td",null,s.a.createElement("div",{className:"two-lines-cell middle"},s.a.createElement("p",{className:"table-row-value source text-center text-truncate",title:e.src_site},this.highlightSearch(e.src_site?e.src_site:"-")),s.a.createElement("p",{className:"table-row-value destination text-center text-truncate",title:e.dest_site},this.highlightSearch(e.dest_site?e.dest_site:"-")))),s.a.createElement("td",null,s.a.createElement("div",{className:"two-lines-cell middle"},s.a.createElement("p",{className:"table-row-value source text-center text-truncate",title:e.src_VO},this.highlightSearch(e.src_VO?e.src_VO:"-")),s.a.createElement("p",{className:"table-row-value destination text-center text-truncate",title:e.dest_VO},this.highlightSearch(e.dest_VO?e.dest_VO:"-")))),s.a.createElement("td",null,s.a.createElement("div",{className:"two-lines-cell small"},s.a.createElement("p",{className:"table-row-value source text-center"},e.src_production?s.a.createElement("i",{className:"green im im-check-mark-circle-o"}):s.a.createElement("i",{className:"red im im-x-mark-circle-o"})),s.a.createElement("p",{className:"table-row-value destination text-center"},e.dest_production?s.a.createElement("i",{className:"green im im-check-mark-circle-o"}):s.a.createElement("i",{className:" red im im-x-mark-circle-o"})))),s.a.createElement("td",{className:"border-right"},s.a.createElement("div",{className:"one-lines-cell small"},s.a.createElement("p",{className:"table-row-value text-center border-right"},this.props.count))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={searchQuery:"",currentPage:{value:1,mask:"1"},paginateBy:5,sortRules:{columnName:"count",asc:!1},itemFocused:0,itemPressed:null},a.handleJumpToPage=a.handleJumpToPage.bind(Object(v.a)(a)),a.handleSortRulesChange=a.handleSortRulesChange.bind(Object(v.a)(a)),a.handleItemFocused=a.handleItemFocused.bind(Object(v.a)(a)),a.handleSearchQueryChange=a.handleSearchQueryChange.bind(Object(v.a)(a)),a.handleItemPressed=a.handleItemPressed.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSortRulesChange",value:function(e){this.setState({sortRules:e})}},{key:"handleJumpToPage",value:function(e,t,a){if(null!==e){var n=e.target.value;t=""===n?{value:this.state.currentPage.value,mask:n}:{value:Number(n),mask:n}}(0===t.value||t.value>a)&&(0===t.value&&(t.value=a,t.mask=String(a)),t.value>a&&(t.value=1,t.mask=String(1))),this.setState({currentPage:t})}},{key:"handleItemFocused",value:function(e){this.setState({itemFocused:e})}},{key:"handleSearchQueryChange",value:function(e){this.setState({searchQuery:e,currentPage:{value:1,mask:"1"}})}},{key:"handleItemPressed",value:function(e){if(null!==e){this.setState({itemPressed:e});var t=document.getElementsByClassName("path-table-row")[e].getAttribute("itemID");this.props.onPathSelected(t),this.props.onHopSelected({selectedHop:null})}this.setState({itemPressed:e})}},{key:"calculateStatistics",value:function(e){var t=new Set(Array.from(this.props.paths,(function(e){return e._source["route-sha1"]}))).size;if(0===e.length)return{itemsShown:e.length,itemsTotal:t,shownFrom:0,shownTo:0};var a=(this.state.currentPage.value-1)*this.state.paginateBy+1;return{itemsShown:e.length,itemsTotal:t,shownFrom:a,shownTo:a+this.state.paginateBy>e.length?e.length:a+this.state.paginateBy-1}}},{key:"calculateMaxPage",value:function(e){var t=1;return e.length&&(t=Math.ceil(e.length/this.state.paginateBy)),t}},{key:"countPaths",value:function(e){for(var t={},a=0;a<e.length;a++)t[e[a]._source["route-sha1"]]=1+(t[e[a]._source["route-sha1"]]||0);return t}},{key:"filterPaths",value:function(e){for(var t=this.state.searchQuery,a=["src","dest","src_host","dest_host","src_site","dest_site","src_VO","dest_VO"],n=[],s=[],r=0;r<e.length;r++)if(!n[e[r]._source["route-sha1"]])if(n[e[r]._source["route-sha1"]]=!0,t){for(var i=0;i<a.length;i++)if(e[r]._source[a[i]]&&e[r]._source[a[i]].toLowerCase().indexOf(t.toLowerCase())>=0){s.push(e[r]);break}}else s.push(e[r]);return s}},{key:"handleHideShow",value:function(){var e=document.getElementById("paths-table-container").classList;e.contains("opened")?e.remove("opened"):e.add("opened")}},{key:"render",value:function(){var e=this.filterPaths(this.props.paths),t=this.countPaths(this.props.paths),a=this.calculateStatistics(e),n=this.calculateMaxPage(e);return s.a.createElement("div",{id:"paths-table-container",className:"paths-table opened"},s.a.createElement("div",{className:"paths-table-switcher"},s.a.createElement("button",{onClick:this.handleHideShow,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},s.a.createElement("i",{className:"im im-arrow-down"}))),s.a.createElement("div",{className:"paths-table-wrapper"},s.a.createElement("div",null,s.a.createElement("div",{className:"paths-table-tools"},s.a.createElement("div",{className:"paths-table-tool-item"}),s.a.createElement("div",{className:"paths-table-tool-item"},s.a.createElement(T,{searchQuery:this.state.searchQuery,onSearchBarChange:this.handleSearchQueryChange,itemFocused:this.state.itemFocused,paginateBy:this.state.paginateBy,currentPage:this.state.currentPage,maxPage:n,tail:e.length%this.state.paginateBy,onJumpToPageChange:this.handleJumpToPage,onItemFocused:this.handleItemFocused,onItemPressed:this.handleItemPressed}))),s.a.createElement("div",{className:"paths-table-body"},s.a.createElement(H,{paths:e,pathsCount:t,searchQuery:this.state.searchQuery,currentPage:this.state.currentPage,paginateBy:this.state.paginateBy,maxPage:n,onJumpToPageChange:this.handleJumpToPage,statistics:a,sortRules:this.state.sortRules,onSortRulesChange:this.handleSortRulesChange,itemFocused:this.state.itemFocused,selectedPath:this.props.selectedPath,onItemFocused:this.handleItemFocused,onItemPressed:this.handleItemPressed})))))}}]),t}(n.Component),M=a(83);a(76),a(223);var J=function(e){return function(e){var t={};return Object.keys(e).forEach((function(a){t[a]=[],e[a].buckets.forEach((function(e){t[a].push({name:e.key,count:0})}))})),t}(e)},A=function(e){return function(e){for(var t=new URLSearchParams(e),a=JSON.parse(t.get("query")).es_query.query.bool.must,n={datetimeFrom:D.a.unix(t.get("datetimeFrom")/1e3),datetimeTo:D.a.unix(t.get("datetimeTo")/1e3),sources:[],sources_hosts:[],destinations:[],destinations_hosts:[],virtual_organisations:[],IPv6:!1},s=0;s<a.length;s++){var r=a[s];if("range"in r)n.datetimeFrom=D.a.unix(r.range.timestamp.gte/1e3),n.datetimeTo=D.a.unix(r.range.timestamp.lte/1e3);else if("term"in r)n.IPv6=r.term.ipv6;else for(var i=0;i<r.bool.should.length;i++){var l=r.bool.should[i].terms;"src"in l&&(n.sources=l.src),"src_host"in l&&(n.sources_hosts=l.src_host),"dest"in l&&(n.destinations=l.dest),"dest_host"in l&&(n.destinations_hosts=l.dest_host)}}return n}(e)},U=function(e){return function(e){var t=[];e.sources.length&&t.push({terms:{src:e.sources}}),e.sources_hosts.length&&t.push({terms:{src_host:e.sources_hosts}});var a=[];e.destinations.length&&a.push({terms:{dest:e.destinations}}),e.destinations_hosts.length&&a.push({terms:{dest_host:e.destinations_hosts}});var n={es_query:{query:{bool:{must:[{range:{timestamp:{gte:D.a.unix(e.datetimeFrom)/1e3,lte:D.a.unix(e.datetimeTo)/1e3}}},{term:{ipv6:e.IPv6}},{bool:{should:t}},{bool:{should:a}}]}}},parameters:{}};return"?query=".concat(JSON.stringify(n))}(e)},V=function(e,t,a){var n={labels:[],datasets:[{label:"Hops",backgroundColor:"rgba(72,72,72,0.5)",borderColor:"rgba(72,72,72,1)",borderWidth:1,outlierColor:"#ff2b71",padding:10,itemRadius:0,data:[]}],pathInfo:null};if(!t)return n;if(e=e.filter((function(e){return e._source["route-sha1"]===t})),a.filterWrongMeasurements&&(e=this.filterWrongMeasurements(e)),!e.length)return n;var s=e.map((function(e){var t=e._source.ttls,a=e._source.rtts;return t.map((function(e,t){return[e,a[t]]}))})),r=[];s[0].forEach((function(e){return r.push(e[0])}));var i=[];s.forEach((function(e){i.push(e.map((function(e){return e[1]})))}));var l=i[0].map((function(e,t){return i.map((function(e){return e[t]}))}));return n.labels=r,n.datasets[0].data=l,n.pathInfo=e[0],n},K=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getOptions=a.getOptions.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"filterWrongMeasurements",value:function(e){var t=function(e){return e>0};return e=e.filter((function(e){return e._source.rtts.every(t)}))}},{key:"getOptions",value:function(){var e=this,t=function(e){var t=e.min,a=e.q1,n=e.median,s=e.q3,r=e.max;return{min:t=t.toFixed(2),q1:a=a.toFixed(2),median:n=n.toFixed(2),q3:s=s.toFixed(2),max:r=r.toFixed(2)}};return{onClick:function(t,a){if(a.length){var n={selectedHop:Number(a[0]._model.label)};e.props.onHopSelected(n)}},tooltips:{callbacks:{title:function(e){return"Hop \u2116 ".concat(e[0].xLabel)},boxplotLabel:function(e,a,n,s){var r=t(n),i=r.min,l=r.q1,c=r.median,o=r.q3,u=r.max;return"min: ".concat(i," max:").concat(u," q1:").concat(l," median:").concat(c," q3:").concat(o)},violinLabel:function(e,a,n){var s=t(n),r=s.min,i=s.q1,l=s.median,c=s.q3,o=s.max;return["min: ".concat(r," max:").concat(o),"median:".concat(l),"q1:".concat(i," q3:").concat(c)]}}}}}},{key:"handleHideShow",value:function(){var e=document.getElementById("path-chart").classList;e.contains("opened")?e.remove("opened"):e.add("opened")}},{key:"handleChartResize",value:function(){var e=document.getElementById("path-chart"),t=e.classList,a=document.getElementById("path-chart-resize-icon").classList,n=document.getElementsByClassName("path-info-container");t.contains("maximized")?(t.remove("maximized"),n[0].classList.remove("maximize-impact"),a.remove("im-minimize"),a.add("im-maximize")):(t.add("maximized"),n[0].classList.add("maximize-impact"),a.remove("im-maximize"),a.add("im-minimize"));var s=e.clientHeight,r=document.getElementsByTagName("body")[0].clientHeight-s-75;document.getElementsByClassName("path-viewer-fragments")[0].style.height=r+"px"}},{key:"render",value:function(){var e=this,t=this.props,a=t.paths,n=t.selectedPath,r=t.pathInfo,i=t.pathChartRef,l=V(a,n,r),c=this.getOptions();return s.a.createElement("div",{id:"path-chart",ref:i,className:"path-viewer-container"},s.a.createElement("div",{className:"path-viewer"},s.a.createElement("div",{className:"path-viewer-switcher"},s.a.createElement("button",{onClick:this.handleHideShow},s.a.createElement("i",{className:"im im-arrow-left"}))),s.a.createElement("div",{className:"path-viewer-switcher resize"},s.a.createElement("button",{onClick:this.handleChartResize},s.a.createElement("i",{id:"path-chart-resize-icon",className:"im im-maximize"}))),s.a.createElement("div",{className:"path-viewer-content"},s.a.createElement("div",{className:"path-viewer-wrapper chart"},s.a.createElement("h3",null,"Hops chart"),s.a.createElement("div",{className:"path-viewer-chart"},s.a.createElement(M.a,{data:l,options:c,legend:!1,ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"violin"}))))))}}]),t}(n.Component),z=a(94),W=(a(224),{url:{API_URL:"/api/"}}),Y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={asnData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.asn,a=JSON.parse(localStorage.getItem("asn-".concat(t)))){e.next=10;break}return e.next=5,fetch("".concat(W.url.API_URL,"asn/").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:(s=e.sent).status&&(a=s.item,localStorage.setItem("asn-".concat(t),JSON.stringify(a)));case 10:this.setState({asnData:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.asnData;return e?s.a.createElement("div",{className:"asn-label"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("td",null,e.Name?e.Name:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Description"),s.a.createElement("td",null,e.Description?e.Description:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Website"),s.a.createElement("td",null,e.Website?s.a.createElement("a",{className:"asn-website",href:e.Website,target:"_blank"},e.Website):"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Country"),s.a.createElement("td",null,e.Country?e.Country:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"E-mail contracts"),s.a.createElement("td",null,e["E-mail contracts"]?e["E-mail contracts"]:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Abuse contracts"),s.a.createElement("td",null,e["Abuse contracts"]?e["Abuse contracts"]:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Traffic estimation"),s.a.createElement("td",null,e["Traffic estimation"]?e["Traffic estimation"]:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Traffic ratio"),s.a.createElement("td",null,e["Traffic ratio"]?e["Traffic ratio"]:"-")),s.a.createElement("tr",null,s.a.createElement("th",null,"Owner address"),s.a.createElement("td",null,e["Owner address"]?e["Owner address"]:"-","}"))))):s.a.createElement("div",{className:"asn-label"},"Loading...")}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={isHovered:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleEnter",value:function(){this.setState({isHovered:!0})}},{key:"handleLeave",value:function(){this.setState({isHovered:!1})}},{key:"render",value:function(){var e,t=this.props,a=t.nodeType,n=t.value,r=t.extraValue,i=t.label,l=t.asn;return e=r?s.a.createElement("span",null,"(",r,")"):l?s.a.createElement("div",{className:"asn-container",onMouseEnter:this.handleEnter.bind(this),onMouseLeave:this.handleLeave.bind(this)},s.a.createElement("span",null,"asn:"),s.a.createElement("span",null,l),this.state.isHovered?s.a.createElement(Y,{asn:l}):s.a.createElement("span",null)):s.a.createElement("span",null),s.a.createElement("div",{className:"path-fragment node "+a},s.a.createElement("div",{className:"node-type"},s.a.createElement("span",null,i)),s.a.createElement("div",{className:"node-info"},s.a.createElement("span",{title:n},n),e))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleHopSelected=a.handleHopSelected.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleHopSelected",value:function(){var e=this.props,t=e.hopNumber;(0,e.onHopSelected)({selectedHop:t})}},{key:"render",value:function(){var e=this.props,t=e.stats,a=e.hopSelected;return s.a.createElement("div",{onClick:this.handleHopSelected,className:"path-fragment hop stats"+(a?" active":"")},s.a.createElement("div",{className:"stats-group less"},s.a.createElement("div",{className:"stats-item min"},s.a.createElement("span",{className:"label"},"Min: "),s.a.createElement("span",{className:"value"},t?t.min.toFixed(2):"-")),s.a.createElement("div",{className:"stats-item q1"},s.a.createElement("span",{className:"label"},"Q1: "),s.a.createElement("span",{className:"value"},t?t.q1.toFixed(2):"-"))),s.a.createElement("div",{className:"stats-group middle"},s.a.createElement("div",{className:"stats-item median"},s.a.createElement("span",{className:"label"},"Std. dev."),s.a.createElement("span",{className:"value"},t?t.stdDev.toFixed(2):"-")),s.a.createElement("div",{className:"stats-item median"},s.a.createElement("span",{className:"label"},"Median"),s.a.createElement("span",{className:"value"},t?t.median.toFixed(2):"-"))),s.a.createElement("div",{className:"stats-group more"},s.a.createElement("div",{className:"stats-item max"},s.a.createElement("span",{className:"label"},"Max: "),s.a.createElement("span",{className:"value"},t?t.max.toFixed(2):"-")),s.a.createElement("div",{className:"stats-item q3"},s.a.createElement("span",{className:"label"},"Q3: "),s.a.createElement("span",{className:"value"},t?t.q3.toFixed(2):"-"))))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).pathInfoRef=s.a.createRef(),a.pathViewerFragments=s.a.createRef(),a.scrollBarRef=s.a.createRef(),a.getPathFragments=a.getPathFragments.bind(Object(v.a)(a)),a.handleHopSelected=a.handleHopSelected.bind(Object(v.a)(a)),a.handleHideShow=a.handleHideShow.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pathChart.current.clientHeight,t=document.getElementsByTagName("body")[0].clientHeight-e-75;document.getElementsByClassName("path-viewer-fragments")[0].style.height=t+"px"}},{key:"componentDidUpdate",value:function(e,t,a){for(var n=-this.pathViewerFragments.current.scrollHeight/2.5,s=document.getElementsByClassName("path-fragment"),r=!1,i=0;i<s.length;i++){if(s[i].classList.contains("active")){r=!0;break}n+=s[i].scrollHeight}r&&this.scrollBarRef.current._container.scrollTo({top:n,behavior:"smooth"})}},{key:"filterWrongMeasurements",value:function(e){var t=function(e){return e>0};return e=e.filter((function(e){return e._source.rtts.every(t)}))}},{key:"getPathFragments",value:function(e){var t=this,a=this.props,n=a.selectedHop,r=a.pathsStats,i=[],l=e.labels,c=e.pathInfo;if(null!==c){var o={};c._source.ttls.forEach((function(e,t){o[e]={hop:c._source.hops[t],asn:c._source.asns[t],stats:r["".concat(c._source["route-sha1"],"-").concat(e)]}})),i.push(s.a.createElement(G,{key:c._source.src+c._source["route-sha1"],label:"src",nodeType:"src",value:c._source.src,extraValue:c._source.src_host}));var u=1,h=Math.max.apply(Math,Object(z.a)(l));l.forEach((function(e,a){for(;a+u<e;)i.push(s.a.createElement($,{key:a+u+"Hop"+c._source["route-sha1"],hopSelected:a+u===n,hopNumber:a+u,onHopSelected:t.props.onHopSelected})),i.push(s.a.createElement(G,{key:a+u+"-node-"+c._source["route-sha1"],nodeType:"missed "+(a+u===h?"dest":"hop"),label:a+u===h?"dest":"Node \u2116"+(a+u),value:"No data"})),u+=1;if(e===a+u){var r=o[e],l=r.hop,m=r.asn,d=r.stats;i.push(s.a.createElement($,{key:a+u+"Hop"+c._source["route-sha1"],hopSelected:a+u===n,stats:d,hopNumber:a+u,onHopSelected:t.props.onHopSelected})),i.push(s.a.createElement(G,{key:a+u+"-node-"+c._source["route-sha1"],nodeType:a+u===h?"dest"+(c._source.dest===l?"":" incomplete"):"hop",label:a+u===h?"dest":"Node \u2116"+(a+u),value:l,asn:m}))}}))}else i.push(s.a.createElement("div",{key:"path-no-data",className:"no-data"},s.a.createElement("span",null,"No data")));return i}},{key:"handleHideShow",value:function(){var e=this.pathInfoRef.current.classList;e.contains("opened")?e.remove("opened"):e.add("opened")}},{key:"handleHopSelected",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.props,t=e.paths,a=e.selectedPath,n=e.pathInfo,r=V(t,a,n),i=this.getPathFragments(r);return s.a.createElement("div",{id:"path-info",ref:this.pathInfoRef,className:"path-viewer-container"},s.a.createElement("div",{className:"path-viewer"},s.a.createElement("div",{className:"path-viewer-switcher"},s.a.createElement("button",{onClick:this.handleHideShow,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},s.a.createElement("i",{className:"im im-arrow-left"}))),s.a.createElement("div",{className:"path-viewer-content"},s.a.createElement("div",{className:"path-viewer-wrapper"},s.a.createElement("h3",null,"Path info"),s.a.createElement("div",{ref:this.pathViewerFragments,className:"path-viewer-fragments"},s.a.createElement(b.a,{ref:this.scrollBarRef},s.a.createElement("div",{className:"path-viewer-fragments-content"},i)))))))}}]),t}(n.Component),Z=(a(225),a(93)),ee=a(7),te={LargeSphere:new ee.SphereGeometry(10,32,32),sphere:new ee.SphereGeometry(5,32,32)},ae=function(){function e(t,a,n,s){Object(h.a)(this,e),this.id=t,this.type=a,this.number=n,this.pathHash=s,this.label=this.getLabel()}return Object(m.a)(e,[{key:"getLabel",value:function(){var e;switch(this.type){case"src":e='<span class="tooltip-content">Source: '.concat(this.id,"</span>");break;case"dest":e='<span class="tooltip-content">Destination: '.concat(this.id,"</span>");break;case"hop":e='<span class="tooltip-content">Node \u2116'.concat(this.number,": ").concat(this.id,"</span>");break;case"src-dest":e='<span class="tooltip-content">Source&Destination: '.concat(this.id,"</span>");break;case"missed-hop":e='<span class="tooltip-content">Missed node \u2116'.concat(this.number,"</span>");break;default:e=this.id}return e}},{key:"color",get:function(){var e;switch(this.type){case"src":e="#ff2b83";break;case"dest":e="#0a7cb3";break;case"src-dest":e="#ad2bff";break;case"missed-hop":e="#ff832b";break;default:e="#484848"}return e}},{key:"shape",get:function(){var e;switch(this.type){case"src":case"dest":case"src-dest":e="LargeSphere";break;default:e="sphere"}return e}}]),e}(),ne=function(){function e(t,a,n,s,r,i){Object(h.a)(this,e),this.id="".concat(s,"-").concat(n),this.source=t.id,this.target=a.id,this.hopNumber=n,this.pathHash=s,this.hopStats=r,this.curvature=0,this.rotation=0,this.distance=this.getDistance(),this.velocity=this.getVelocity(),this.color="#484848",this.completed=i}return Object(m.a)(e,[{key:"getDistance",value:function(){var e=5;return this.hopStats&&(e=this.hopStats.median)<=5&&(e=5),e}},{key:"getVelocity",value:function(){var e=.4;return this.hopStats&&(e=this.hopStats.median<=0?.4:Math.exp(-.05*(this.hopStats.median+40))),e}},{key:"calculateCurvature",set:function(e){this.curvature=.3*e},get:function(){return this.curvature}},{key:"calculateRotation",set:function(e){this.rotation=Number((Math.PI*e/6).toFixed(3))},get:function(){return this.rotation}}]),e}(),se=function(){function e(){Object(h.a)(this,e),this.nodes={},this.links={},this.nodesConnectionsCounter={}}return Object(m.a)(e,[{key:"addNode",value:function(e){e.id in this.nodes&&"hop"!==e.type?(("src"===e.type&&"dest"===this.nodes[e.id].type||"dest"===e.type&&"src"===this.nodes[e.id].type)&&(e.type="src-dest",e.label=e.getLabel()),delete this.nodes[e.id],this.nodes[e.id]=e):this.nodes[e.id]=e}},{key:"addLink",value:function(e){e.id in this.links||(this.nodesConnectionsCounter[e.source]=this.nodesConnectionsCounter[e.source]?this.nodesConnectionsCounter[e.source]+1:1,e.calculateCurvature=this.nodesConnectionsCounter[e.source],e.calculateRotation=this.nodesConnectionsCounter[e.source],this.links[e.id]=e)}},{key:"jsonData",value:function(){return{nodes:Object.values(this.nodes),links:Object.values(this.links)}}}]),e}(),re=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={graphData:{nodes:[],links:[]}},a.graphRef=s.a.createRef(),a.focusOnHop=a.focusOnHop.bind(Object(v.a)(a)),a.prepareData=a.prepareData.bind(Object(v.a)(a)),a.getLinkLabel=a.getLinkLabel.bind(Object(v.a)(a)),a.handleHopPressed=a.handleHopPressed.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"getLinkLabel",value:function(e){var t=this.props.pathsStats[e];return'<div class="tooltip-content">\n              <table>\n                <tr>\n                  <th><span class="label">Min: </span></th>\n                  <td><span class="value">'.concat(t?t.min.toFixed(2):"-",'</span></td>\n                  <th><span class="label">Std. dev.: </span></th>\n                  <td><span class="value">').concat(t?t.stdDev.toFixed(2):"-",'</span></td>\n                  <th><span class="label">Max: </span></th>\n                  <td><span class="value">').concat(t?t.max.toFixed(2):"-",'</span></td>\n                </tr>\n                <tr>\n                  <th><span class="label">Q1: </span></th>\n                  <td><span class="value">').concat(t?t.q1.toFixed(2):"-",'</span></td>\n                  <th><span class="label">Median: </span></th>\n                  <td><span class="value">').concat(t?t.median.toFixed(2):"-",'</span></td>\n                  <th><span class="label">Q3: </span></th>\n                  <td><span class="value">').concat(t?t.q3.toFixed(2):"-","</span></td>\n                </tr>\n            </table>\n          </div>")}},{key:"componentDidMount",value:function(){var e=this.prepareData();this.graphRef.current.d3Force("link").distance((function(e){return e.distance})),this.setState({graphData:e})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(this.props.responseData!==e.responseData){var s=this.prepareData();this.setState({graphData:s})}if(this.props.selectedHop!==e.selectedHop){var r=this.props,i=r.selectedPath,l=r.selectedHop;this.graphRef.current.d3Force("link").distance((function(e){return"".concat(i,"-").concat(l)===e.id&&n.focusOnHop(e),e.distance}))}}},{key:"handleHopPressed",value:function(e){var t=this.props,a=t.selectedPath,n=t.selectedHop;a===e.pathHash&&n===e.hopNumber?(this.props.onPathSelected(null),this.props.onHopSelected({selectedHop:null})):a===e.pathHash&&n!==e.hopNumber?this.props.onHopSelected({selectedHop:e.hopNumber}):(this.props.onPathSelected(e.pathHash),this.props.onHopSelected({selectedHop:e.hopNumber})),this.graphRef.current.refresh()}},{key:"focusOnHop",value:function(e){if(e.__arrowObj){var t=e.__arrowObj.position,a=1+250/Math.hypot(t.x,t.y,t.z);this.graphRef.current.cameraPosition({x:t.x*a,y:t.y*a,z:t.z*a},t,3e3)}}},{key:"prepareData",value:function(){for(var e=this.props,t=e.responseData,a=e.pathsStats,n=t.hits.hits,s=new se,r=function(e){var t=n[e]._source,r=t["route-sha1"],i=t.hops,l=t.ttls,c=new ae(t.src,"src",0,r);s.addNode(c);var o=new ae(t.dest,"dest",i.length-1,r);s.addNode(o);var u=o.id===i[i.length-1],h=c,m=1;i.forEach((function(e,t){for(var n=l[t];t+m<n;){var c=new ae("".concat(r,"-").concat(t+m),"missed-hop",t+m,r);s.addNode(c),s.addLink(new ne(h,c,t+m,r,a["".concat(r,"-").concat(t+m)],u)),h=c,m+=1}var d=new ae(e,"hop",t+m,r);t!==i.length-1?(s.addNode(d),s.addLink(new ne(h,d,n,r,a["".concat(r,"-").concat(n)],u)),h=d):u?s.addLink(new ne(h,o,n,r,a["".concat(r,"-").concat(n)],u)):(s.addNode(d),s.addLink(new ne(h,d,n,r,a["".concat(r,"-").concat(n)],u)),s.addLink(new ne(d,o,n+1,r,a["".concat(r,"-").concat(n)],u)))}))},i=0;i<n.length;i++)r(i);return s.jsonData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectedPath,n=t.selectedHop;return s.a.createElement(Z.a,{graphData:this.state.graphData,ref:this.graphRef,backgroundColor:"#ffffff",linkWidth:2.5,linkCurvature:function(e){return e.curvature},linkCurveRotation:function(e){return e.rotation},linkDirectionalArrowLength:10,linkDirectionalArrowRelPos:1,linkColor:function(e){return e.pathHash===a?"".concat(a,"-").concat(n)===e.id?"#21bda8":"#bd1d4f":"#484848"},linkDirectionalParticles:function(e){return e.pathHash===a?3:0},linkDirectionalParticleWidth:4,linkDirectionalParticleSpeed:function(e){return e.velocity},nodeLabel:function(e){return e.label},linkLabel:function(t){return e.getLinkLabel(t.id)},showNavInfo:!1,onLinkClick:function(t){return e.handleHopPressed(t)},nodeThreeObject:function(e){var t=e.shape,a=e.color;return new ee.Mesh(te[t],new ee.MeshBasicMaterial({color:a}))}})}}]),t}(n.Component),ie=(a(299),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"loader",className:this.props.hidden?"loader hidden":"loader"},s.a.createElement("div",{className:"loader-inner"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"dot-container"},s.a.createElement("div",{className:"dot src"}),s.a.createElement("div",{className:"dot"}),s.a.createElement("div",{className:"dot"})),s.a.createElement("div",{className:"dot-container"},s.a.createElement("div",{className:"dot"}),s.a.createElement("div",{className:"dot missed"}),s.a.createElement("div",{className:"dot"})),s.a.createElement("div",{className:"dot-container"},s.a.createElement("div",{className:"dot src-dest"}),s.a.createElement("div",{className:"dot"}),s.a.createElement("div",{className:"dot dest"}))),s.a.createElement("p",null,"Loading")))}}]),t}(n.Component)),le=(a(300),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).focusOnFilter=a.focusOnFilter.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"focusOnFilter",value:function(){var e=this.props.queryContainer.current;e.classList.contains("opened")||e.classList.add("opened");var t=this.props.itemID;document.getElementById("".concat(t,"-switcher")).click()}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.items;return a.length?s.a.createElement("div",{className:"filter-preview-item"},s.a.createElement("button",{onClick:this.focusOnFilter,className:"focus-on-ipv"},t,": ",s.a.createElement("span",{className:"items-counter"},a.length))):s.a.createElement("div",null)}}]),t}(n.Component)),ce=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).switchIPv=a.switchIPv.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"switchIPv",value:function(){this.props.IPv6?document.getElementById("ipv4-selection").click():document.getElementById("ipv6-selection").click();var e=this.props.triggerRequest;setTimeout((function(){e()}),1e3)}},{key:"render",value:function(){var e=this.props.IPv6;return s.a.createElement("div",{className:"filter-preview-item"},s.a.createElement("button",{onClick:this.switchIPv,className:"focus-on-ipv"},e?"IPv6":"IPv4"))}}]),t}(n.Component),oe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).focusDatetimeFrom=a.focusDatetimeFrom.bind(Object(v.a)(a)),a.focusDatetimeTo=a.focusDatetimeTo.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"focusDatetimeFrom",value:function(){document.getElementById("time-query").classList.contains("opened")||document.getElementsByClassName("search-query-switcher")[0].childNodes[0].click();this.focusInput(0)}},{key:"focusDatetimeTo",value:function(){document.getElementById("time-query").classList.contains("opened")||document.getElementsByClassName("search-query-switcher")[0].childNodes[0].click();this.focusInput(1)}},{key:"focusInput",value:function(e){document.getElementsByClassName("form-control")[e].click()}},{key:"render",value:function(){var e=this.props,t=e.datetimeFrom,a=e.datetimeTo;return s.a.createElement("div",{className:"filter-preview-item"},s.a.createElement("i",{className:"im im-history"}),s.a.createElement("button",{onClick:this.focusDatetimeFrom,className:"focus-on-time"},t.toISOString().slice(0,19).replace("T"," ")),s.a.createElement("i",{className:"im im-arrow-right"}),s.a.createElement("button",{onClick:this.focusDatetimeTo,className:"focus-on-time"},a.toISOString().slice(0,19).replace("T"," ")))}}]),t}(n.Component),ue=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.query,a=e.itemsFilters,n=e.queryContainer,r=[];return a.forEach((function(e,a){r.push(s.a.createElement(le,{queryContainer:n,key:"".concat(a,"-filter-preview"),name:e.title,items:t[e.id],itemID:e.id}))})),s.a.createElement("div",{className:"filter-preview"},s.a.createElement("div",{className:"filter-preview-inner"},s.a.createElement(oe,{datetimeFrom:t.datetimeFrom,datetimeTo:t.datetimeTo}),s.a.createElement(ce,{IPv6:t.IPv6,triggerRequest:this.props.triggerRequest}),r))}}]),t}(n.Component),he=(a(301),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={responseData:null,pathsStats:null,currentUrl:"",interruptedUrl:"",query:{datetimeFrom:null,datetimeTo:null,sources:[],sources_hosts:[],destinations:[],destinations_hosts:[],virtual_organisations:[],IPv6:!1},pathInfo:{filterWrongMeasurements:!1},pathTableData:null,graphVisualisation:{threeDimensions:!1,linksPower:1,showMissedHops:!1},graphNavigation:{selectedPath:null},pathNavigation:{selectedHop:null},ipv4Items:null,ipv6Items:null},a.pathChartRef=s.a.createRef(),a.queryContainerRef=s.a.createRef(),a.preLoaderContainer=s.a.createRef(),a.preLoaderErrors=s.a.createRef(),a.loaderContainer=s.a.createRef(),a.loaderErrors=s.a.createRef(),a.handleQueryChange=a.handleQueryChange.bind(Object(v.a)(a)),a.handlePathSelected=a.handlePathSelected.bind(Object(v.a)(a)),a.handleHopSelected=a.handleHopSelected.bind(Object(v.a)(a)),a.handleHideShow=a.handleHideShow.bind(Object(v.a)(a)),a.getData=a.getData.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s,r,i,l,u,h,m,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.search,i={},l={},h=0;case 4:if(!(h<10)){e.next=51;break}if(e.prev=5,t.length){e.next=18;break}return e.next=9,fetch("".concat(W.url.API_URL,"query"));case 9:return n=e.sent,e.next=12,n.json();case 12:u=e.sent,(a=Object(o.a)({},this.state.query)).datetimeFrom=new Date(u.datetime_range[0]),a.datetimeTo=new Date(u.datetime_range[1]),e.next=25;break;case 18:return e.next=20,fetch("".concat(W.url.API_URL,"query").concat(t));case 20:return n=e.sent,e.next=23,n.json();case 23:u=e.sent,a=A(t);case 25:return e.next=27,fetch("".concat(W.url.API_URL,"aggregations/true"));case 27:return s=e.sent,e.next=30,s.json();case 30:return r=e.sent,i=J(r.es_data.aggregations),e.next=34,fetch("".concat(W.url.API_URL,"aggregations/false"));case 34:return s=e.sent,e.next=37,s.json();case 37:return r=e.sent,l=J(r.es_data.aggregations),this.preLoaderContainer.current.classList.add("hidden"),e.abrupt("break",51);case 43:e.prev=43,e.t0=e.catch(5),h+=1,this.preLoaderErrors.current.innerHTML="",this.preLoaderErrors.current.append("Failed to get response from server. Retry ".concat(h,"/10")),this.preLoaderContainer.current.classList.remove("hidden");case 49:e.next=4;break;case 51:try{u.status?(t=U(a),m="".concat(W.url.API_URL,"query").concat(t),window.history.pushState(null,"queried",window.location.origin+t),d=u.es_data,p=u.stats,this.setState({query:a,responseData:d,pathsStats:p,currentUrl:m,ipv4Items:i,ipv6Items:l}),this.preLoaderErrors.current&&this.preLoaderContainer.current.classList.add("hidden")):alert(JSON.stringify(u.message))}catch(c){this.preLoaderErrors.current&&(this.preLoaderErrors.current.innerHTML="",this.preLoaderErrors.current.append("Failed to get response from server. Try later."))}case 52:case"end":return e.stop()}}),e,this,[[5,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleQueryChange",value:function(e){this.setState({query:e})}},{key:"handlePathSelected",value:function(e){var t=this.state.graphNavigation;e===t.selectedPath?t.selectedPath=null:t.selectedPath=e,this.setState({graphNavigation:t})}},{key:"handleHopSelected",value:function(e){this.setState({pathNavigation:e})}},{key:"getData",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s,r,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.query,a=U(t),s=0,(r=document.getElementById("loader")).classList.remove("hidden"),n="".concat(W.url.API_URL,"query").concat(a),window.history.pushState(null,"queried",window.location.origin+a),n===this.state.currentUrl){e.next=25;break}case 8:if(!(s<10)){e.next=24;break}return e.prev=9,e.next=12,fetch(n).then((function(e){return e.json()})).then((function(e){e.status?e.number_of_paths>50?window.confirm("Number of paths is ".concat(e.number_of_paths,", which is not recommended for rendering. Are you sure you want to continue?"))&&(i.setState({pathsStats:e.stats}),i.setState({responseData:e.es_data})):(i.setState({pathsStats:e.stats}),i.setState({responseData:e.es_data})):alert(JSON.stringify(e.message))}));case 12:this.loaderContainer.current.classList.add("hidden"),s=10,e.next=22;break;case 16:e.prev=16,e.t0=e.catch(9),s+=1,this.loaderErrors.current.innerHTML="",this.loaderErrors.current.append("Failed to get response from server. Retry ".concat(s,"/10")),this.loaderContainer.current.classList.remove("hidden");case 22:e.next=8;break;case 24:this.setState({currentUrl:n});case 25:r.classList.add("hidden");case 26:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleHideShow",value:function(){var e=this.queryContainerRef.current.classList;e.contains("opened")?e.remove("opened"):e.add("opened")}},{key:"render",value:function(){if(null===this.state.responseData)return s.a.createElement("div",null,s.a.createElement(ie,{hidden:!1}),s.a.createElement("div",{ref:this.preLoaderContainer,className:"errors-on-load hidden"},s.a.createElement("p",{ref:this.preLoaderErrors})));var e=[{title:"Sources",id:"sources",hideIPs:!1},{title:"Sources hosts",id:"sources_hosts",hideIPs:!1},{title:"Destinations",id:"destinations",hideIPs:!1},{title:"Destinations hosts",id:"destinations_hosts",hideIPs:!1}];return s.a.createElement("div",{className:"app-wrapper"},s.a.createElement(ue,{queryContainer:this.queryContainerRef,query:this.state.query,itemsFilters:e,triggerRequest:this.getData}),s.a.createElement("div",{ref:this.queryContainerRef,className:"query-container opened",onMouseLeave:this.getData},s.a.createElement("div",{className:"query-container-inner"},s.a.createElement("div",{id:"query-switcher"},s.a.createElement("button",{onClick:this.handleHideShow},s.a.createElement("i",{className:"im im-arrow-right"}))),s.a.createElement("div",{className:"query-container-body"},s.a.createElement("div",{id:"logo",onClick:function(){return document.location.href="/"}}),s.a.createElement(_,{query:this.state.query,onQueryChange:this.handleQueryChange}),s.a.createElement("div",{className:"query-separator"}),s.a.createElement(L,{strikeQuery:this.getData,query:this.state.query,onQueryChange:this.handleQueryChange}),s.a.createElement("div",{className:"query-separator"}),s.a.createElement(j,{strikeQuery:this.getData,query:this.state.query,itemsFilters:e,ipv4Items:this.state.ipv4Items,ipv6Items:this.state.ipv6Items,aggregations:this.state.responseData.aggregations,onQueryChange:this.handleQueryChange})))),s.a.createElement("div",{className:"table-container"},s.a.createElement(Q,{paths:this.state.responseData.hits.hits,onPathSelected:this.handlePathSelected,selectedPath:this.state.graphNavigation.selectedPath,onHopSelected:this.handleHopSelected})),s.a.createElement("div",{className:"path-chart-container"},s.a.createElement(K,{pathChartRef:this.pathChartRef,pathInfo:this.state.pathInfo,paths:this.state.responseData.hits.hits,selectedPath:this.state.graphNavigation.selectedPath,onHopSelected:this.handleHopSelected})),s.a.createElement("div",{className:"path-info-container"},s.a.createElement(X,{pathChart:this.pathChartRef,pathInfo:this.state.pathInfo,paths:this.state.responseData.hits.hits,pathsStats:this.state.pathsStats,selectedPath:this.state.graphNavigation.selectedPath,selectedHop:this.state.pathNavigation.selectedHop,onHopSelected:this.handleHopSelected})),s.a.createElement("div",{id:"graph-container"},s.a.createElement(re,{responseData:this.state.responseData,pathsStats:this.state.pathsStats,graphVisualisation:this.state.graphVisualisation,graphNavigation:this.state.graphNavigation,pathNavigation:this.state.pathNavigation,onHopSelected:this.handleHopSelected,onPathSelected:this.handlePathSelected,selectedPath:this.state.graphNavigation.selectedPath,selectedHop:this.state.pathNavigation.selectedHop})),s.a.createElement("div",null,s.a.createElement(ie,{hidden:!0}),s.a.createElement("div",{ref:this.loaderContainer,className:"errors-on-load hidden"},s.a.createElement("p",{ref:this.loaderErrors}))))}}]),t}(n.Component));a(302);i.a.render(s.a.createElement(he,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a(303)}},[[99,1,2]]]);
//# sourceMappingURL=main.bf1b2c4d.chunk.js.map