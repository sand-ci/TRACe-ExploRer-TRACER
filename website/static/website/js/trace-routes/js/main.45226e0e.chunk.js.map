{"version":3,"sources":["components/filters/items.js","components/filters/items-query.js","components/filters/time-query.js","components/filters/ipv-query.js","components/tables/paths-table.js","utils/common.js","components/viewers/path-chart.js","constants.js","components/viewers/path-info.js","components/graphs/force-directed-graph.js","components/loaders/request.js","components/filters/preview.js","App.js","index.js"],"names":["ItemsBox","props","handleItemsFilterDelete","bind","handleItemsFilterClear","e","this","onItemsFilterDelete","itemsFilterID","target","getAttribute","onItemsFilterClear","boxContent","items","length","i","push","className","key","onClick","itemID","Component","SearchBar","handleSearchQueryChange","handleSearchBarReset","handleKeyDown","handleKeyUp","handleArrowUp","handleArrowDown","handleItemPressed","onSearchBarChange","value","itemFocused","paginateBy","currentPage","maxPage","onJumpToPageChange","onItemFocused","tail","itemFocusedCandidate","currentPageCandidate","mask","String","onItemPressed","keyCode","type","onChange","searchQuery","onKeyDown","onKeyUp","SortBar","handleFieldCLick","sortRules","parentElement","name","active","count","asc","matchIndex","onSortRulesChange","FilterContent","handleItemFocusedChange","handleJumpToPage","handleItemsFilterSelect","undefined","Number","itemName","onItemsFilterSelect","filterID","sort","a","b","weight","pageNumber","slice","processedItems","paginateItems","sortItems","rows","item","itemIdx","focused","pressed","itemPressed","onItemFocusedChange","id","prepareRows","statistics","ContentRow","highlightSearchQuery","modifiedSpan","substring","chunks","split","additionalClasses","join","onMouseEnter","title","toLocaleString","Paginator","handlePreviousPage","handleNextPage","handleFocusOut","onBlur","Statistics","shownFrom","shownTo","itemsShown","itemsTotal","ItemsFilter","state","handleItemFocused","handleSortRulesChange","onTrashCanClick","setState","document","getElementById","childNodes","pageInput","element","classList","contains","remove","add","toLowerCase","indexOf","Math","ceil","filterItems","calculateStatistics","calculateMaxPage","shownFilter","selectedItems","SearchQueryNavigation","prepareButtons","handleShownFilterChange","onShownFilterChange","buttons","itemsFilters","forEach","itemFilter","idx","ItemsQuery","remapItems","containers","getElementsByClassName","query","unshift","onQueryChange","aggregations","buckets","map","doc_count","TimeQuery","handleDateTimeChange","handleEndDateBlur","handleStartDateBlur","timeRange","start","end","newQuery","datetimeTo","datetimeFrom","endDate","startDate","moment","utc","clone","subtract","strikeData","dateFormat","timeFormat","pickerClassName","input","onEndDateBlur","onStartDateBlur","IPvQuery","onIPv4Clicked","onIPv6Clicked","toggleSelection","ipv6","IPv6","Contents","handleSortFieldCLick","currentTarget","columnName","pathsCount","fieldName","_source","odd","abs","selectedPath","onItemClicked","colSpan","cellSpacing","cellPadding","paths","Path","highlightSearch","handleItemCLicked","index","src","dest","src_host","dest_host","src_site","dest_site","src_VO","dest_VO","src_production","dest_production","PathsTable","pathID","onPathSelected","onHopSelected","selectedHop","Set","Array","from","size","searchFields","buffer","k","j","filterPaths","countPaths","handleHideShow","onMouseDown","handleMouseDown","onMouseUp","handleMouseUp","dispatchUrl","url","urlSearchParams","urlParams","URLSearchParams","mustConditions","JSON","parse","get","es_query","bool","must","unix","sources","sources_hosts","destinations","destinations_hosts","virtual_organisations","condition","range","timestamp","gte","lte","term","should","conditionTerms","terms","DispatchUrl","packUrl","srcShould","destShould","parameters","stringify","PackUrl","preparePathData","pathInfo","data","labels","datasets","label","backgroundColor","borderColor","borderWidth","outlierColor","padding","itemRadius","filter","path","filterWrongMeasurements","ttlsRtts","ttls","rtts","xCoords","rttsValues","values","rttsByTtls","col","row","PathChart","getOptions","higherZero","number","every","convertStats","stats","min","q1","median","q3","max","toFixed","event","pathNavigation","_model","tooltips","callbacks","tooltipItems","xLabel","boxplotLabel","hoveredOutlierIndex","violinLabel","chartElement","iconClassList","pathInfoContainer","chartHeight","clientHeight","restScreenHeight","getElementsByTagName","style","height","pathChartRef","pathChartData","options","ref","handleChartResize","legend","chartInstance","config","API_URL","ASNumberLabel","asnData","asn","localStorage","getItem","fetch","response","json","response_content","status","setItem","href","PathNode","isHovered","variablePart","nodeType","extraValue","handleEnter","onMouseLeave","handleLeave","PathHop","handleHopSelected","hopNumber","hopSelected","stdDev","PathInfo","pathInfoRef","React","createRef","pathViewerFragments","scrollBarRef","getPathFragments","pathChart","current","prevProps","prevState","snapshot","scrollTop","scrollHeight","elements","flag","scrollTo","top","behavior","pathInfoData","pathsStats","content","pathData","ttl","hop","offset","destNumber","console","log","pathFragments","shapes","SphereGeometry","Node","pathHash","getLabel","color","shape","Link","source","hopStats","completed","curvature","rotation","distance","getDistance","velocity","getVelocity","dist","exp","counter","PI","GraphData","nodes","links","nodesConnectionsCounter","node","link","calculateCurvature","calculateRotation","Object","ForceDirectedGraph","graphData","graphRef","focusOnHop","prepareData","getLinkLabel","handleHopPressed","linkId","d3Force","responseData","hopPressed","refresh","position","distRatio","hypot","x","y","z","cameraPosition","hits","record","hops","addNode","previousNode","missedNode","addLink","jsonData","linkWidth","linkCurvature","d","linkCurveRotation","linkDirectionalArrowLength","linkDirectionalArrowRelPos","linkColor","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleSpeed","nodeLabel","n","linkLabel","l","showNavInfo","onLinkClick","nodeThreeObject","Mesh","MeshBasicMaterial","RequestLoader","hidden","ItemsPreview","focusOnFilter","container","queryContainer","click","IPv6Preview","switchIPv","triggerRequest","setTimeout","TimePreview","focusDatetimeFrom","focusDatetimeTo","focusInput","toISOString","replace","FiltersPreview","itemsFiltersContent","App","currentUrl","interruptedUrl","pathTableData","graphVisualisation","threeDimensions","linksPower","showMissedHops","graphNavigation","queryContainerRef","handleQueryChange","handlePathSelected","getData","window","location","search","Date","history","pushState","origin","alert","message","loader","then","res","confirm","ReactDOM","render"],"mappings":"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","file":"static/js/main.45226e0e.chunk.js","sourcesContent":["import './css/items.css';\nimport '../../icons/iconmonstr-iconic-font-1.3.0/css/iconmonstr-iconic-font.min.css'\nimport React, { Component } from 'react';\nimport PerfectScrollbar from 'react-perfect-scrollbar'\nimport 'react-perfect-scrollbar/dist/css/styles.css';\n\nclass ItemsBox extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleItemsFilterDelete = this.handleItemsFilterDelete.bind(this);\n    this.handleItemsFilterClear = this.handleItemsFilterClear.bind(this);\n  }\n\n  handleItemsFilterDelete(e) {\n    this.props.onItemsFilterDelete(this.props.itemsFilterID, e.target.getAttribute(\"itemID\"))\n  }\n\n  handleItemsFilterClear() {\n    this.props.onItemsFilterClear(this.props.itemsFilterID)\n  }\n\n  render() {\n    let boxContent = [];\n    if (this.props.items.length) {\n      for (let i = 0; i < this.props.items.length; i++) {\n        boxContent.push(\n          <button\n            className={\"selected-item text-truncate\"}\n            key={\"btn-\" + this.props.items[i]}\n            onClick={this.handleItemsFilterDelete}\n            itemID={this.props.items[i]}\n          >\n            {this.props.items[i]}\n          </button>\n        )\n      }\n      return(\n        <div className={\"selected-items-box-wrapper\"}>\n          <div className={\"selected-items-box\"}>\n            <div className={\"selected-items-box-empty\"}>\n              <button onClick={this.handleItemsFilterClear}>\n                <i className=\"im im-x-mark-circle\"/>\n              </button>\n            </div>\n            <PerfectScrollbar>\n              <div className={\"item-box-scroll-content\"}>\n                {boxContent}\n              </div>\n            </PerfectScrollbar>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className={\"selected-items-box-wrapper\"}>\n          <div className={\"selected-items-box\"}>\n            <div key={\"item-box-empty\"} className={\"no-data-container\"}>\n              <span className={\"no-data\"}>No items selected</span>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n}\n\nclass SearchBar extends Component {\n\n  constructor (props) {\n    super(props);\n\n    this.handleSearchQueryChange = this.handleSearchQueryChange.bind(this);\n    this.handleSearchBarReset = this.handleSearchBarReset.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n    this.handleArrowUp = this.handleArrowUp.bind(this);\n    this.handleArrowDown = this.handleArrowDown.bind(this);\n    this.handleItemPressed = this.handleItemPressed.bind(this);\n  }\n\n  handleSearchQueryChange(e) {\n    this.props.onSearchBarChange(e.target.value)\n  }\n\n  handleSearchBarReset() {\n    this.props.onSearchBarChange(\"\")\n  }\n\n  handleArrowUp() {\n    const { itemFocused, paginateBy, currentPage, maxPage, onJumpToPageChange, onItemFocused, tail } = this.props;\n    let itemFocusedCandidate = itemFocused;\n    let currentPageCandidate = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    if (itemFocused > 0) {\n      itemFocusedCandidate --;\n      onItemFocused(itemFocusedCandidate)\n    } else {\n      if (currentPage.value > 1) {\n        currentPageCandidate.value = currentPage.value - 1;\n        currentPageCandidate.mask = String(currentPage.value - 1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(paginateBy - 1)\n      } else {\n        currentPageCandidate.value = maxPage;\n        currentPageCandidate.mask = String(maxPage);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(tail - 1)\n      }\n    }\n  }\n\n  handleArrowDown() {\n    const { itemFocused, paginateBy, currentPage, maxPage, onJumpToPageChange, onItemFocused, tail } = this.props;\n    let itemFocusedCandidate = itemFocused;\n    let currentPageCandidate = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    if (currentPage.value < maxPage) {\n      if (itemFocused < paginateBy - 1) {\n        itemFocusedCandidate ++;\n        onItemFocused(itemFocusedCandidate)\n      } else {\n        currentPageCandidate.value = currentPage.value + 1;\n        currentPageCandidate.mask = String(currentPage.value + 1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(0)\n      }\n    } else {\n      if (itemFocused < tail - 1) {\n        itemFocusedCandidate ++;\n        onItemFocused(itemFocusedCandidate)\n      } else {\n        currentPageCandidate.value = 1;\n        currentPageCandidate.mask = String(1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(0)\n      }\n    }\n\n  }\n\n  handleItemPressed() {\n    this.props.onItemPressed(this.props.itemFocused)\n  }\n\n  handleKeyDown(e) {\n    if (e.keyCode === 38) {\n      this.handleArrowUp()\n    } else if (e.keyCode === 40) {\n      this.handleArrowDown()\n    } else if (e.keyCode === 13) {\n      this.handleItemPressed()\n    }\n  }\n\n  handleKeyUp(e) {\n    if (e.keyCode === 13) {\n      this.props.onItemPressed(null)\n    }\n  }\n\n  render () {\n    return (\n      <div className={\"items-filter-searchbar\"}>\n        <span>Search</span>\n        <input\n          className={\"items-filter-searchbar-input\"}\n          type=\"text\"\n          onChange={this.handleSearchQueryChange}\n          value={this.props.searchQuery}\n          onKeyDown={this.handleKeyDown}\n          onKeyUp={this.handleKeyUp}\n        />\n        <button onClick={this.handleSearchBarReset} className={\"reset-searchbar-btn\"}>\n          <i className=\"im im-x-mark-circle\"/>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass SortBar extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleFieldCLick = this.handleFieldCLick.bind(this)\n  }\n\n  handleFieldCLick(e) {\n    const sortRules = this.props.sortRules;\n    if (e.target.parentElement.getAttribute(\"itemID\") === \"name\") {\n      sortRules.name.active = true;\n      sortRules.count.active = false;\n      sortRules.name.asc = !this.props.sortRules.name.asc;\n    } else {\n      sortRules.count.active = true;\n      sortRules.name.active = false;\n      sortRules.count.asc = !this.props.sortRules.count.asc;\n    }\n\n    sortRules.matchIndex.active = false;\n    this.props.onSortRulesChange(sortRules)\n  }\n\n  render() {\n    return (\n      <div className={\"items-filter-sortbar\"}>\n        <button onClick={this.handleFieldCLick} itemID={\"name\"} className={\"items-filter-sortbar-field name\" + (this.props.sortRules.name.asc ? \"\": \" rotated\")}>\n          <h5 className={this.props.sortRules.name.active ? \"active\": \"\"}>Name</h5>\n          <span><i className=\"im im-arrow-up\"/></span>\n        </button>\n        <button onClick={this.handleFieldCLick} itemID={\"count\"} className={\"items-filter-sortbar-field count\"  + (this.props.sortRules.count.asc ? \"\": \" rotated\")}>\n          <h5 className={this.props.sortRules.count.active ? \"active\": \"\"}>Count</h5>\n          <span><i className=\"im im-arrow-up\"/></span>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass FilterContent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleItemFocusedChange = this.handleItemFocusedChange.bind(this);\n    this.handleJumpToPage = this.handleJumpToPage.bind(this);\n    this.handleItemsFilterSelect = this.handleItemsFilterSelect.bind(this);\n  }\n\n  handleJumpToPage(currentPage) {\n    this.props.onJumpToPageChange(currentPage)\n  }\n\n  handleItemFocusedChange(itemID) {\n    if (itemID !== undefined) {\n      this.props.onItemFocused(Number(itemID))\n    }\n  }\n\n  handleItemsFilterSelect(itemName) {\n    this.props.onItemsFilterSelect(this.props.filterID, itemName)\n  }\n\n  sortItems(items) {\n\n    if (this.props.sortRules.matchIndex.active) {\n      if (this.props.sortRules.matchIndex.asc) {\n        items.sort((a, b) => (a.count > b.count ? 1: -1));\n        items.sort((a, b) => (a.weight > b.weight ? 1: -1))\n      } else {\n        items.sort((a, b) => (a.count > b.count ? 1: -1));\n        items.sort((a, b) => (a.weight < b.weight ? 1: -1))\n      }\n\n      return items\n    }\n\n    if (this.props.sortRules.name.active) {\n      if (this.props.sortRules.name.asc) {\n        items.sort((a, b) => (a.count < b.count ? 1: -1));\n        items.sort((a, b) => (a.name > b.name ? 1: -1))\n      } else {\n        items.sort((a, b) => (a.count < b.count ? 1: -1));\n        items.sort((a, b) => (a.name < b.name ? 1: -1))\n      }\n    } else {\n      if (this.props.sortRules.count.asc) {\n        items.sort((a, b) => (a.name > b.name ? 1: -1));\n        items.sort((a, b) => (a.count > b.count ? 1: -1))\n      } else {\n        items.sort((a, b) => (a.name > b.name ? 1: -1));\n        items.sort((a, b) => (a.count < b.count ? 1: -1))\n      }\n    }\n\n    return items\n  }\n\n  paginateItems(items) {\n    let pageNumber = this.props.currentPage.value;\n    --pageNumber;\n    return items.slice(pageNumber * this.props.paginateBy, (pageNumber + 1) * this.props.paginateBy);\n  }\n\n  prepareRows(items) {\n    let processedItems = this.paginateItems(this.sortItems(items));\n    let rows = [];\n\n    if (items.length) {\n      for (let i = 0; i < processedItems.length; i++) {\n        let item = processedItems[i];\n        rows.push(\n          <ContentRow\n            key={item.name}\n            name={item.name}\n            count={item.count}\n            weight={item.weight}\n            searchQuery={this.props.searchQuery}\n            itemIdx={i}\n            focused={i === this.props.itemFocused}\n            pressed={i === this.props.itemPressed}\n            onItemsFilterSelect={this.handleItemsFilterSelect}\n            onItemFocusedChange={this.handleItemFocusedChange}\n          />\n        )\n      }\n    } else {\n      rows = [<li key={\"no-data\"} className={\"filter-item no-data\"}><span>No data</span></li>]\n    }\n\n    return rows\n  }\n\n  render() {\n    return(\n      <div className={\"\"}>\n        <div className={\"filter-content\"}>\n          <ul id={\"filter-items-shown-\" + this.props.filterID} className={\"filter-content-list\"}>\n            {this.prepareRows(this.props.items)}\n          </ul>\n        </div>\n        <Paginator\n          currentPage={this.props.currentPage}\n          maxPage={this.props.maxPage}\n          onJumpToPageChange={this.props.onJumpToPageChange}\n        />\n        <Statistics statistics={this.props.statistics}/>\n      </div>\n    )\n  }\n}\n\nclass ContentRow extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleItemFocusedChange = this.handleItemFocusedChange.bind(this);\n    this.handleItemsFilterSelect = this.handleItemsFilterSelect.bind(this);\n    this.highlightSearchQuery = this.highlightSearchQuery.bind(this);\n  }\n\n  handleItemFocusedChange() {\n    this.props.onItemFocusedChange(this.props.itemIdx)\n  }\n\n  handleItemsFilterSelect() {\n    this.props.onItemsFilterSelect(this.props.name)\n  }\n\n  highlightSearchQuery() {\n    if (this.props.searchQuery.length) {\n      let modifiedSpan = [];\n      let name = this.props.name;\n      let substring = this.props.name.slice(this.props.weight, this.props.weight + this.props.searchQuery.length);\n      let chunks = name.split(substring);\n\n      for (let i = 0; i < chunks.length; i++) {\n        modifiedSpan.push(chunks[i]);\n        if (i + 1 !== chunks.length) {\n          modifiedSpan.push(<span key={i + substring} className={\"search-query-highlight\"}>{substring}</span>)\n        }\n      }\n\n      return modifiedSpan\n    } else {\n      return <span>{this.props.name}</span>\n    }\n  }\n\n  render() {\n    let additionalClasses = [\n      this.props.focused ? \"focused\": \"\",\n      this.props.pressed ? \"pressed\": \"\"\n    ].join(\" \");\n\n    return(\n      <li\n        key={this.props.name}\n        className={\"filter-item\" + additionalClasses ? \" \" + additionalClasses: \"\"}\n        value={this.props.name}\n        onClick={this.handleItemsFilterSelect}\n        onMouseEnter={this.handleItemFocusedChange}\n      >\n        <div className={\"filter-item-name text-truncate\"} title={this.props.name}>\n          <span>{this.highlightSearchQuery()}</span>\n        </div>\n        <div className={\"filter-name-count text-truncate\"}>\n          <span>{this.props.count.toLocaleString()}</span>\n        </div>\n      </li>\n    )\n  }\n}\n\nclass Paginator extends Component {\n  constructor (props) {\n    super(props);\n\n    this.handlePreviousPage = this.handlePreviousPage.bind(this);\n    this.handleJumpToPage = this.handleJumpToPage.bind(this);\n    this.handleNextPage = this.handleNextPage.bind(this);\n    this.handleFocusOut = this.handleFocusOut.bind(this)\n  }\n\n  handlePreviousPage() {\n    let currentPage = {\n      value: this.props.currentPage.value - 1,\n      mask: this.props.currentPage.value - 1,\n    };\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  handleJumpToPage(e, currentPage) {\n    this.props.onJumpToPageChange(e, currentPage, this.props.maxPage)\n  }\n\n  handleNextPage() {\n    let currentPage = {\n      value: this.props.currentPage.value + 1,\n      mask: this.props.currentPage.value + 1,\n    };\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  handleFocusOut() {\n    const currentPage = this.props.currentPage;\n    currentPage.mask = currentPage.value;\n\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  render() {\n    return (\n      <div className={\"items-filter-paginator\"}>\n        <button onClick={this.handlePreviousPage}><i className={\"im im-angle-left\"}/></button>\n        <div className={\"page-numbers\"}>\n          <input\n            className={\"items-filter-paginator-input\"}\n            onChange={this.handleJumpToPage}\n            onBlur={this.handleFocusOut}\n            value={this.props.currentPage.mask}\n            type=\"text\"/>\n          <span>/</span>\n          <span>{this.props.maxPage}</span>\n        </div>\n        <button onClick={this.handleNextPage}><i className={\"im im-angle-right\"}/></button>\n      </div>\n    )\n  }\n}\n\nclass Statistics extends Component {\n  render() {\n    return (\n      <div className={\"items-filter-statistics\"}>\n        <p>\n          <span>Showing </span>\n          <span>{this.props.statistics.shownFrom} </span>\n          <span>to </span>\n          <span>{this.props.statistics.shownTo} </span>\n          <span>of </span>\n          <span>{this.props.statistics.itemsShown} </span>\n          <span>({this.props.statistics.itemsTotal}) </span>\n          <span>records</span>\n        </p>\n      </div>\n    )\n  }\n}\n\nclass ItemsFilter extends Component {\n  constructor (props) {\n    super(props);\n\n    this.state = {\n      searchQuery: \"\",\n      currentPage: {\n        value: 1,\n        mask: \"1\"\n      },\n      paginateBy: 10,\n      sortRules: {\n        name: {\n          asc: true,\n          active: false\n        },\n        count: {\n          asc: false,\n          active: true\n        },\n        matchIndex: {\n          asc:true,\n          active: false\n        }\n      },\n      itemFocused: 0,\n      itemPressed: null\n    };\n\n    this.handleItemFocused = this.handleItemFocused.bind(this);\n    this.handleItemPressed = this.handleItemPressed.bind(this);\n    this.handleJumpToPage = this.handleJumpToPage.bind(this);\n    this.handleSortRulesChange = this.handleSortRulesChange.bind(this);\n    this.handleSearchQueryChange = this.handleSearchQueryChange.bind(this);\n    this.onTrashCanClick = this.onTrashCanClick.bind(this);\n  }\n\n  handleItemFocused(itemFocused) {\n    this.setState({itemFocused})\n  }\n\n  handleItemPressed(itemPressed) {\n    if (itemPressed !== null) {\n      const value = document.getElementById(\"filter-items-shown-\" + this.props.filterID)\n        .childNodes[itemPressed].getAttribute(\"value\");\n\n      this.props.onItemsFilterSelect(this.props.filterID, value)\n    }\n\n    this.setState({itemPressed})\n  }\n\n  handleJumpToPage(e, currentPage, maxPage) {\n    if (e !== null) {\n      let pageInput = e.target.value;\n      if (pageInput === \"\") {\n        currentPage = {\n          value: this.state.currentPage.value,\n          mask: pageInput,\n        };\n      } else {\n        currentPage = {\n          value: Number(pageInput),\n          mask: pageInput\n        }\n      }\n    }\n    if ((0 === currentPage.value) || (currentPage.value > maxPage)) {\n      if (0 === currentPage.value) {\n        currentPage.value = maxPage;\n        currentPage.mask = String(maxPage)\n      }\n      if (currentPage.value > maxPage) {\n        currentPage.value = 1;\n        currentPage.mask = String(1)\n      }\n    }\n\n    this.setState({currentPage})\n  }\n\n  handleSortRulesChange(sortRules) {\n    this.setState({sortRules})\n  }\n\n  handleSearchQueryChange(searchQuery) {\n    const currentPage = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    let sortRules = this.state.sortRules;\n    sortRules.matchIndex.active = !!searchQuery.length;\n\n    this.setState({\n      searchQuery,\n      currentPage,\n      sortRules\n    })\n  }\n\n  onTrashCanClick(e) {\n    const element = e.target.parentElement;\n    if (element.classList.contains(\"rotated\")) {\n      element.classList.remove(\"rotated\");\n    } else {\n      element.classList.add(\"rotated\");\n    }\n\n    this.props.onItemsFilterClear(this.props.filterID);\n\n    this.setState({\n      searchQuery: \"\",\n      currentPage: {\n        value: 1,\n        mask: \"1\"\n      },\n      sortRules: {\n        name: {\n          asc: true,\n          active: false\n        },\n        count: {\n          asc: false,\n          active: true\n        },\n        matchIndex: {\n          asc:false,\n          active: false\n        }\n      },\n      itemFocused: 0,\n      itemPressed: null\n    })\n  }\n\n  filterItems() {\n    let items = [];\n    if (this.state.searchQuery) {\n      for (let i = 0; i < this.props.items.length; i++) {\n        let item = this.props.items[i];\n        let weight = item.name.toLowerCase().indexOf(this.state.searchQuery);\n        if (weight >= 0) {\n          item.weight = weight;\n          items.push(item)\n        }\n      }\n    } else {\n      items = this.props.items\n    }\n\n    return items\n  }\n\n  calculateStatistics(items) {\n    if (items.length === 0) {\n      return {\n        itemsShown: items.length,\n        itemsTotal: this.props.items.length,\n        shownFrom: 0,\n        shownTo: 0\n      }\n    } else {\n      const shownFrom = (this.state.currentPage.value - 1) * this.state.paginateBy + 1;\n      return {\n        itemsShown: items.length,\n        itemsTotal: this.props.items.length,\n        shownFrom: shownFrom,\n        shownTo: shownFrom + this.state.paginateBy > items.length ? items.length: shownFrom + this.state.paginateBy - 1\n      };\n    }\n  }\n\n  calculateMaxPage(items) {\n    let maxPage = 1;\n    if (items.length) {\n      maxPage = Math.ceil(items.length/this.state.paginateBy);\n    }\n    return maxPage\n  }\n\n  render() {\n    let items = this.props.items;\n    if (items.length) {\n      items = this.filterItems(items);\n    }\n\n    const statistics = this.calculateStatistics(items);\n    const maxPage = this.calculateMaxPage(items);\n\n    return (\n      <div className={\"items-filter\" + (this.props.shownFilter ? \" shown\": \"\")}>\n        <div className={\"items-filter-wrapper\"}>\n          <div className={\"items-filter-header\"}>\n            <div className={\"items-filter-reset\"}>\n              <button onClick={this.onTrashCanClick}><i className=\"im im-trash-can\"/></button>\n            </div>\n            <div className={\"items-filter-title\"}>\n              <h3>{this.props.title}</h3>\n            </div>\n          </div>\n          <div className={\"items-filter-body\"}>\n            <ItemsBox\n                items={this.props.selectedItems}\n                onItemsFilterDelete={this.props.onItemsFilterDelete}\n                itemsFilterID={this.props.filterID}\n                onItemsFilterClear={this.props.onItemsFilterClear}\n            />\n            <SearchBar\n                searchQuery={this.state.searchQuery}\n                onSearchBarChange={this.handleSearchQueryChange}\n                itemFocused={this.state.itemFocused}\n                paginateBy={this.state.paginateBy}\n                currentPage={this.state.currentPage}\n                maxPage={maxPage}\n                tail={items.length%this.state.paginateBy}\n                onJumpToPageChange={this.handleJumpToPage}\n                onItemFocused={this.handleItemFocused}\n                onItemPressed={this.handleItemPressed}\n            />\n            <SortBar\n                sortRules={this.state.sortRules}\n                onSortRulesChange={this.handleSortRulesChange}\n            />\n            <FilterContent\n                filterID={this.props.filterID}\n                searchQuery={this.state.searchQuery}\n                items={items}\n                currentPage={this.state.currentPage}\n                onJumpToPageChange={this.handleJumpToPage}\n                onItemFocused={this.handleItemFocused}\n                itemFocused={this.state.itemFocused}\n                itemPressed={this.state.itemPressed}\n                onItemsFilterSelect={this.props.onItemsFilterSelect}\n                statistics={statistics}\n                maxPage={maxPage}\n                sortRules={this.state.sortRules}\n                paginateBy={this.state.paginateBy}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ItemsFilter;","import ItemsFilter from \"./items\";\nimport './css/items-query.css';\nimport React, {Component} from 'react';\n\nclass SearchQueryNavigation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.prepareButtons = this.prepareButtons.bind(this);\n    this.handleShownFilterChange = this.handleShownFilterChange.bind(this)\n  }\n\n  handleShownFilterChange(e) {\n    const shownFilter = Number(e.target.getAttribute(\"itemID\"));\n    this.props.onShownFilterChange(shownFilter)\n  }\n\n  prepareButtons() {\n    const buttons = [];\n    this.props.itemsFilters.forEach((itemFilter, idx) => {\n      buttons.push(\n        <button\n          id={`${itemFilter.id}-switcher`}\n          key={itemFilter.title}\n          className={\"search-query-item\" + (this.props.shownFilter === idx ? \" active\" : \"\")}\n          onClick={this.handleShownFilterChange}\n          itemID={idx}\n        >\n          {itemFilter.title}\n        </button>\n      )\n    });\n\n    return buttons\n  }\n\n  render() {\n    const buttons = this.prepareButtons();\n\n    return (\n      <div className={\"search-query-nav\"}>\n        {buttons}\n      </div>\n    )\n  }\n}\n\nclass ItemsQuery extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      shownFilter: 1\n    };\n\n    this.handleShownFilterChange = this.handleShownFilterChange.bind(this);\n    this.remapItems = this.remapItems.bind(this);\n    this.handleItemsFilterSelect = this.handleItemsFilterSelect.bind(this);\n    this.handleItemsFilterDelete = this.handleItemsFilterDelete.bind(this);\n    this.handleItemsFilterClear = this.handleItemsFilterClear.bind(this);\n  }\n\n  handleHideShow() {\n    const containers = document.getElementsByClassName(\"search-query-container\");\n    for (let i = 0; i < containers.length; i++) {\n      const classList = containers[i].classList;\n      if (classList.contains(\"opened\")) {\n        classList.remove(\"opened\")\n      } else {\n        classList.add(\"opened\")\n      }\n    }\n  }\n\n  handleShownFilterChange(shownFilter) {\n    this.setState({shownFilter})\n  }\n\n  handleItemsFilterSelect(itemsFilterID, value) {\n    let query = this.props.query;\n    if (query[itemsFilterID].indexOf(value) < 0) {\n      query[itemsFilterID].unshift(value);\n\n      this.props.onQueryChange(query)\n    }\n  }\n\n  handleItemsFilterDelete(itemsFilterID, value) {\n    let query = this.props.query;\n    let selectedItems = [];\n\n    query[itemsFilterID].forEach(item => {\n      if (String(item) !== String(value)) {\n        selectedItems.push(item)\n      }\n    });\n\n    query[itemsFilterID] = selectedItems;\n    this.props.onQueryChange(query)\n  }\n\n  handleItemsFilterClear(itemsFilterID) {\n    let query = this.props.query;\n    query[itemsFilterID] = [];\n    this.props.onQueryChange(query)\n  }\n\n  remapItems(itemsFilterID) {\n    return this.props.aggregations[itemsFilterID].buckets.map(item => {\n      return {name: item.key, count: item.doc_count}\n    })\n  }\n\n  render() {\n    let itemsFilters = [];\n    this.props.itemsFilters.forEach((itemFilter, idx) => {\n      itemsFilters.push(\n        <ItemsFilter\n          key={itemFilter.id}\n          title={itemFilter.title}\n          filterID={itemFilter.id}\n          shownFilter={this.state.shownFilter === idx}\n          items={this.remapItems(itemFilter.id)}\n          selectedItems={this.props.query[itemFilter.id]}\n          onItemsFilterSelect={this.handleItemsFilterSelect}\n          onItemsFilterDelete={this.handleItemsFilterDelete}\n          onItemsFilterClear={this.handleItemsFilterClear}\n        />\n      )\n    });\n\n    return (\n      <div id={\"search-query\"} className={\"search-query-container opened\"}>\n        <SearchQueryNavigation\n          itemsFilters={this.props.itemsFilters}\n          shownFilter={this.state.shownFilter}\n          onShownFilterChange={this.handleShownFilterChange}\n        />\n        <div className={\"search-query\"}>\n          {itemsFilters}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ItemsQuery;\n","import DatetimeRangePicker from 'react-datetime-range-picker';\nimport './css/time-query.css';\nimport React, {Component} from 'react';\nimport moment from \"moment\";\n\n\nclass TimeQuery extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDateTimeChange = this.handleDateTimeChange.bind(this);\n    this.handleEndDateBlur = this.handleEndDateBlur.bind(this);\n    this.handleStartDateBlur = this.handleStartDateBlur.bind(this);\n    this.onTrashCanClick = this.onTrashCanClick.bind(this);\n  }\n\n  handleDateTimeChange(timeRange) {\n    const {start, end} = timeRange;\n\n    let newQuery = {...this.props.query};\n    newQuery.datetimeTo = end;\n    newQuery.datetimeFrom = start;\n\n    this.props.onQueryChange(newQuery)\n  }\n\n  handleEndDateBlur(endDate) {\n    if (endDate < this.props.query.datetimeFrom) {\n      let newQuery = {...this.props.query};\n      newQuery.datetimeTo = this.props.query.datetimeFrom;\n      newQuery.datetimeFrom = endDate;\n\n      this.props.onQueryChange(newQuery)\n    }\n  }\n\n  handleStartDateBlur(startDate) {\n    if (startDate > this.props.query.datetimeTo) {\n      let newQuery = {...this.props.query};\n      newQuery.datetimeTo = startDate;\n      newQuery.datetimeFrom = this.props.query.datetimeTo;\n\n      this.props.onQueryChange(newQuery)\n    }\n  }\n\n  onTrashCanClick(e) {\n    const element = e.target.parentElement;\n    if (element.classList.contains(\"rotated\")) {\n      element.classList.remove(\"rotated\");\n    } else {\n      element.classList.add(\"rotated\");\n    }\n\n    const datetimeTo = moment().utc();\n    let newQuery = {...this.props.query};\n    newQuery.datetimeTo = datetimeTo;\n    newQuery.datetimeFrom = datetimeTo.clone().subtract(1, \"minutes\");\n    this.props.onQueryChange(newQuery)\n  }\n\n  render() {\n    const {strikeData} = this.props;\n\n    return (\n      <div id={\"time-query\"} className={\"search-query-container opened\"} onMouseEnter={strikeData}>\n        <div className={\"time-query\"}>\n          <div className={\"time-query-wrapper\"}>\n            <div>\n              <div className={\"items-filter-header\"}>\n                <div className={\"items-filter-reset\"}>\n                  <button onClick={this.onTrashCanClick}><i className=\"im im-trash-can\"/></button>\n                </div>\n                <div className={\"items-filter-title\"}>\n                  <h3>Time range</h3>\n                </div>\n              </div>\n              <div>\n                <div className={\"time-query-labels\"}>\n                  <div>\n                    <span>from:</span>\n                  </div>\n                  <div>\n                    <span>to:</span>\n                  </div>\n                </div>\n                <DatetimeRangePicker\n                  dateFormat={\"YYYY-MM-DD\"}\n                  timeFormat={\"H:mm:ss\"}\n                  pickerClassName={\"datetime-picker\"}\n                  startDate={this.props.query.datetimeFrom}\n                  endDate={this.props.query.datetimeTo}\n                  input={true}\n                  utc={true}\n                  onChange={this.handleDateTimeChange}\n                  onEndDateBlur={this.handleEndDateBlur}\n                  onStartDateBlur={this.handleStartDateBlur}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default TimeQuery;\n","import './css/ipv-query.css';\nimport React, {Component} from 'react';\n\n\nclass IPvQuery extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onIPv4Clicked = this.onIPv4Clicked.bind(this);\n    this.onIPv6Clicked = this.onIPv6Clicked.bind(this);\n    this.toggleSelection = this.toggleSelection.bind(this);\n    this.onTrashCanClick = this.onTrashCanClick.bind(this);\n  }\n\n  onTrashCanClick(e) {\n    const element = e.target.parentElement;\n    if (element.classList.contains(\"rotated\")) {\n      element.classList.remove(\"rotated\");\n    } else {\n      element.classList.add(\"rotated\");\n    }\n\n    this.toggleSelection(false)\n  }\n\n  toggleSelection(ipv6) {\n    let newQuery = {...this.props.query};\n    newQuery.IPv6 = ipv6;\n    this.props.onQueryChange(newQuery)\n  }\n\n  onIPv4Clicked() {\n    this.toggleSelection(false)\n  }\n\n  onIPv6Clicked() {\n    this.toggleSelection(true)\n  }\n\n  render() {\n    const { IPv6 } = this.props.query;\n\n    return (\n      <div id={\"ipv-query\"} className={\"search-query-container opened\"}>\n        <div className={\"ipv-query\"}>\n          <div className={\"ipv-query-wrapper\"}>\n            <div>\n              <div className={\"items-filter-header\"}>\n                <div className={\"items-filter-reset\"}>\n                  <button onClick={this.onTrashCanClick}><i className=\"im im-trash-can\"/></button>\n                </div>\n                <div className={\"items-filter-title\"}>\n                  <h3>IP version</h3>\n                </div>\n              </div>\n              <div className={\"ipv-content\"}>\n                <div className={\"ipv-names\"}>\n                  <div className={\"ipv-name\"}>\n                    <span>IPv4</span>\n                  </div>\n                  <div className={\"ipv-name\"}>\n                    <span>IPv6</span>\n                  </div>\n                </div>\n                <div className={\"ipv-selections\"}>\n                  <div id={\"ipv4-selection\"} className={\"ipv-selection ipv4\" + (IPv6 ? \" hidden\": \" active\")} onClick={this.onIPv4Clicked}>\n                    <div className={\"selection-indicator\"}>selected</div>\n                  </div>\n                  <div id={\"ipv6-selection\"} className={\"ipv-selection ipv6\" + (IPv6 ? \" active\": \" hidden\")} onClick={this.onIPv6Clicked}>\n                    <div className={\"selection-indicator\"}>selected</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default IPvQuery;","import './css/paths-table.css';\nimport React, {Component} from 'react';\n\n\nclass SearchBar extends Component {\n\n  constructor (props) {\n    super(props);\n\n    this.handleSearchQueryChange = this.handleSearchQueryChange.bind(this);\n    this.handleSearchBarReset = this.handleSearchBarReset.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n    this.handleArrowUp = this.handleArrowUp.bind(this);\n    this.handleArrowDown = this.handleArrowDown.bind(this);\n    this.handleItemPressed = this.handleItemPressed.bind(this);\n  }\n\n  handleSearchQueryChange(e) {\n    this.props.onSearchBarChange(e.target.value)\n  }\n\n  handleSearchBarReset() {\n    this.props.onSearchBarChange(\"\")\n  }\n\n  handleArrowUp() {\n    const { itemFocused, paginateBy, currentPage, maxPage, onJumpToPageChange, onItemFocused, tail } = this.props;\n    let itemFocusedCandidate = itemFocused;\n    let currentPageCandidate = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    if (itemFocused > 0) {\n      itemFocusedCandidate --;\n      onItemFocused(itemFocusedCandidate)\n    } else {\n      if (currentPage.value > 1) {\n        currentPageCandidate.value = currentPage.value - 1;\n        currentPageCandidate.mask = String(currentPage.value - 1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(paginateBy - 1)\n      } else {\n        currentPageCandidate.value = maxPage;\n        currentPageCandidate.mask = String(maxPage);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(tail - 1)\n      }\n    }\n  }\n\n  handleArrowDown() {\n    const { itemFocused, paginateBy, currentPage, maxPage, onJumpToPageChange, onItemFocused, tail } = this.props;\n    let itemFocusedCandidate = itemFocused;\n    let currentPageCandidate = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    if (currentPage.value < maxPage) {\n      if (itemFocused < paginateBy - 1) {\n        itemFocusedCandidate ++;\n        onItemFocused(itemFocusedCandidate)\n      } else {\n        currentPageCandidate.value = currentPage.value + 1;\n        currentPageCandidate.mask = String(currentPage.value + 1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(0)\n      }\n    } else {\n      if (itemFocused < tail - 1) {\n        itemFocusedCandidate ++;\n        onItemFocused(itemFocusedCandidate)\n      } else {\n        currentPageCandidate.value = 1;\n        currentPageCandidate.mask = String(1);\n        onJumpToPageChange(null, currentPageCandidate, maxPage);\n        onItemFocused(0)\n      }\n    }\n\n  }\n\n  handleItemPressed() {\n    this.props.onItemPressed(this.props.itemFocused)\n  }\n\n  handleKeyDown(e) {\n    if (e.keyCode === 38) {\n      this.handleArrowUp()\n    } else if (e.keyCode === 40) {\n      this.handleArrowDown()\n    } else if (e.keyCode === 13) {\n      this.handleItemPressed()\n    }\n  }\n\n  handleKeyUp(e) {\n    if (e.keyCode === 13) {\n      this.props.onItemPressed(null)\n    }\n  }\n\n  render () {\n    return (\n      <div className={\"items-filter-searchbar\"}>\n        <span>Search</span>\n        <input\n          className={\"items-filter-searchbar-input\"}\n          type=\"text\"\n          onChange={this.handleSearchQueryChange}\n          value={this.props.searchQuery}\n          onKeyDown={this.handleKeyDown}\n          onKeyUp={this.handleKeyUp}\n        />\n        <button onClick={this.handleSearchBarReset} className={\"reset-searchbar-btn\"}>\n          <i className=\"im im-x-mark-circle\"/>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass Statistics extends Component {\n  render() {\n    return (\n      <div className={\"items-filter-statistics\"}>\n        <p>\n          <span>Showing </span>\n          <span>{this.props.statistics.shownFrom} </span>\n          <span>to </span>\n          <span>{this.props.statistics.shownTo} </span>\n          <span>of </span>\n          <span>{this.props.statistics.itemsShown} </span>\n          <span>({this.props.statistics.itemsTotal}) </span>\n          <span>records</span>\n        </p>\n      </div>\n    )\n  }\n}\n\nclass Paginator extends Component {\n  constructor (props) {\n    super(props);\n\n    this.handlePreviousPage = this.handlePreviousPage.bind(this);\n    this.handleJumpToPage = this.handleJumpToPage.bind(this);\n    this.handleNextPage = this.handleNextPage.bind(this);\n    this.handleFocusOut = this.handleFocusOut.bind(this)\n  }\n\n  handlePreviousPage() {\n    let currentPage = {\n      value: this.props.currentPage.value - 1,\n      mask: this.props.currentPage.value - 1,\n    };\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  handleJumpToPage(e, currentPage) {\n    this.props.onJumpToPageChange(e, currentPage, this.props.maxPage)\n  }\n\n  handleNextPage() {\n    let currentPage = {\n      value: this.props.currentPage.value + 1,\n      mask: this.props.currentPage.value + 1,\n    };\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  handleFocusOut() {\n    const currentPage = this.props.currentPage;\n    currentPage.mask = currentPage.value;\n\n    this.handleJumpToPage(null, currentPage)\n  }\n\n  render() {\n    return (\n      <div className={\"paths-table-paginator\"}>\n        <div className={\"empty\"}/>\n        <button onClick={this.handlePreviousPage}><i className={\"im im-angle-left\"}/></button>\n        <div className={\"page-numbers\"}>\n          <input\n            className={\"items-filter-paginator-input\"}\n            onChange={this.handleJumpToPage}\n            onBlur={this.handleFocusOut}\n            value={this.props.currentPage.mask}\n            type=\"text\"/>\n          <span>/</span>\n          <span>{this.props.maxPage}</span>\n        </div>\n        <button onClick={this.handleNextPage}><i className={\"im im-angle-right\"}/></button>\n        <div className={\"empty\"}/>\n      </div>\n    )\n  }\n}\n\nclass Contents extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.prepareRows = this.prepareRows.bind(this);\n    this.sortItems = this.sortItems.bind(this);\n    this.handleSortFieldCLick = this.handleSortFieldCLick.bind(this);\n    this.handleItemFocusedChange = this.handleItemFocusedChange.bind(this);\n  }\n\n  handleSortFieldCLick(e) {\n    const sortRules = this.props.sortRules;\n    const element = e.currentTarget;\n    if (element.getAttribute(\"name\") === sortRules.columnName) {\n      sortRules.asc = !this.props.sortRules.asc;\n    } else {\n      sortRules.asc = element.getAttribute(\"value\") === \"asc\";\n      sortRules.columnName = element.getAttribute(\"name\")\n    }\n\n    this.props.onSortRulesChange(sortRules)\n  }\n\n  handleItemFocusedChange(itemID) {\n    if (itemID !== undefined) {\n      this.props.onItemFocused(Number(itemID))\n    }\n  }\n\n  sortItems(items) {\n    const {sortRules, pathsCount} = this.props;\n    if (sortRules.columnName === \"count\") {\n      if (sortRules.asc) {\n        items.sort((a, b) => (pathsCount[a[\"_source\"][\"route-sha1\"]] > pathsCount[b[\"_source\"][\"route-sha1\"]] ? 1: -1));\n      } else {\n        items.sort((a, b) => (pathsCount[a[\"_source\"][\"route-sha1\"]] < pathsCount[b[\"_source\"][\"route-sha1\"]] ? 1: -1));\n      }\n    } else {\n      const fieldName = sortRules.columnName;\n      if (sortRules.asc) {\n        items.sort((a, b) => ((a[\"_source\"][fieldName] || '') > (b[\"_source\"][fieldName] || '') ? 1: -1));\n      } else {\n        items.sort((a, b) => ((a[\"_source\"][fieldName] || '') < (b[\"_source\"][fieldName] || '') ? 1: -1));\n      }\n    }\n\n    return items\n  }\n\n  paginateItems(items) {\n    let pageNumber = this.props.currentPage.value;\n    --pageNumber;\n    return items.slice(pageNumber * this.props.paginateBy, (pageNumber + 1) * this.props.paginateBy);\n  }\n\n  prepareRows(items) {\n    let processedItems = this.paginateItems(this.sortItems(items));\n    let rows = [];\n\n    if (items.length) {\n      for (let i = 0; i < processedItems.length; i++) {\n        let item = processedItems[i];\n        rows.push(\n          <Path\n            key={item._source[\"route-sha1\"]}\n            searchQuery={this.props.searchQuery}\n            itemIdx={i}\n            item={item}\n            count={this.props.pathsCount[item._source[\"route-sha1\"]]}\n            odd={Math.abs(i % 2) === 1}\n            focused={this.props.itemFocused === i}\n            pressed={this.props.selectedPath === item._source[\"route-sha1\"]}\n            onItemFocusedChange={this.handleItemFocusedChange}\n            onItemClicked={this.props.onItemPressed}\n          />\n        )\n      }\n    } else {\n      rows = [<tr key={\"no-data\"} className={\"filter-item no-data\"}><td colSpan={6}><span>No data</span></td></tr>]\n    }\n\n    return rows\n  }\n\n  render() {\n    const {columnName, asc} = this.props.sortRules;\n\n    return (\n      <div>\n        <table id={\"paths-table\"} className={\"full-width\"} cellSpacing=\"1\" cellPadding=\"0\">\n          <thead>\n          <tr className={\"table-head\"}>\n            <th>\n              <div className={\"table-column-name\"}>\n                <span>Path's ends</span>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <span>Hosts</span>\n              </div>\n            </th>\n            <th className={\"middle\"}>\n              <div className={\"table-column-name\"}>\n                <span>Sites</span>\n              </div>\n            </th>\n            <th className={\"middle\"}>\n              <div className={\"table-column-name\"}>\n                <span>Virtual Organisations</span>\n              </div>\n            </th>\n            <th className={\"small\"}>\n              <div className={\"table-column-name\"}>\n                <span>Production</span>\n              </div>\n            </th>\n            <th className={\"small\"}>\n              <div className={\"table-column-name no-border\"}>\n                <span>Count</span>\n              </div>\n            </th>\n          </tr>\n          <tr className={\"table-sub-head\"}>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"two-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"src\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"src\"} value={\"desc\"}>\n                    <span>Src</span>\n                    <span className={\"arrow\"}>{columnName === \"src\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                  <button className={\"table-row-value text-center \" + (columnName === \"dest\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"dest\"} value={\"desc\"}>\n                    <span>Dest</span>\n                    <span className={\"arrow\"}>{columnName === \"dest\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"two-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"src_host\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"src_host\"} value={\"desc\"}>\n                    <span>Src</span>\n                    <span className={\"arrow\"}>{columnName === \"src_host\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                  <button className={\"table-row-value text-center \" + (columnName === \"dest_host\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"dest_host\"} value={\"desc\"}>\n                    <span>Dest</span>\n                    <span className={\"arrow\"}>{columnName === \"dest_host\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"two-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"src_site\" && !asc ? \"rotated\": \"\")}  onClick={this.handleSortFieldCLick} name={\"src_site\"} value={\"desc\"}>\n                    <span>Src</span>\n                    <span className={\"arrow\"}>{columnName === \"src_site\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                  <button className={\"table-row-value text-center \" + (columnName === \"dest_site\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"dest_site\"} value={\"desc\"}>\n                    <span>Dest</span>\n                    <span className={\"arrow\"}>{columnName === \"dest_site\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"two-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"src_VO\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"src_VO\"} value={\"desc\"}>\n                    <span>Src</span>\n                    <span className={\"arrow\"}>{columnName === \"src_VO\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                  <button className={\"table-row-value text-center \" + (columnName === \"dest_VO\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"dest_VO\"} value={\"desc\"}>\n                    <span>Dest</span>\n                    <span className={\"arrow\"}>{columnName === \"dest_VO\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"two-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"src_production\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"src_production\"} value={\"desc\"}>\n                    <span>Src</span>\n                    <span className={\"arrow\"}>{columnName === \"src_production\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                  <button className={\"table-row-value text-center \" + (columnName === \"dest_production\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"dest_production\"} value={\"desc\"}>\n                    <span>Dest</span>\n                    <span className={\"arrow\"}>{columnName === \"dest_production\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n            <th>\n              <div className={\"table-column-name\"}>\n                <div className={\"one-lines-cell\"}>\n                  <button className={\"table-row-value text-center \" + (columnName === \"count\" && !asc ? \"rotated\": \"\")} onClick={this.handleSortFieldCLick} name={\"count\"} value={\"desc\"}>\n                    <span>Records</span>\n                    <span className={\"arrow\"}>{columnName === \"count\" ? <i className=\"im im-arrow-up\"/>:\n                      <i className=\"im im-minus\"/>}</span>\n                  </button>\n                </div>\n              </div>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n          {this.prepareRows(this.props.paths)}\n          </tbody>\n        </table>\n        <div>\n          <Paginator\n            currentPage={this.props.currentPage}\n            maxPage={this.props.maxPage}\n            onJumpToPageChange={this.props.onJumpToPageChange}\n          />\n          <Statistics statistics={this.props.statistics}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass Path extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleItemFocusedChange = this.handleItemFocusedChange.bind(this);\n    this.highlightSearch = this.highlightSearch.bind(this);\n    this.handleItemCLicked = this.handleItemCLicked.bind(this);\n  }\n\n  handleItemCLicked() {\n    this.props.onItemClicked(this.props.itemIdx)\n  }\n\n  handleItemFocusedChange() {\n    this.props.onItemFocusedChange(this.props.itemIdx)\n  }\n\n  highlightSearch(value) {\n    if (this.props.searchQuery.length) {\n      let index = value.toLowerCase().indexOf(this.props.searchQuery.toLowerCase());\n      if (index >= 0) {\n        let modifiedSpan = [];\n        let substring = value.slice(index, index + this.props.searchQuery.length);\n        let chunks = value.split(substring);\n\n        for (let i = 0; i < chunks.length; i++) {\n          modifiedSpan.push(chunks[i]);\n          if (i + 1 !== chunks.length) {\n            modifiedSpan.push(<span key={i + substring} className={\"search-query-highlight\"}>{substring}</span>)\n          }\n        }\n\n        return modifiedSpan\n      } else {\n        return value\n      }\n\n    } else {\n      return value\n    }\n  }\n\n  render() {\n    const item = this.props.item._source;\n\n    return (\n      <tr onMouseEnter={this.handleItemFocusedChange}\n          onClick={this.handleItemCLicked\n          } itemID={item[\"route-sha1\"]}\n          className={\"path-table-row\" + (this.props.odd ? \" odd\": \" even\") + (this.props.focused ? \" focused\": \"\") + (this.props.pressed ? \" pressed\": \"\")}>\n        <td className={\"border-left\"}>\n          <div className={\"two-lines-cell large\"}>\n            <p className={\"table-row-value source text-left text-truncate\"} title={item.src}><span>{this.highlightSearch(item.src ? item.src: \"-\")}</span></p>\n            <p className={\"table-row-value destination text-left text-truncate\"} title={item.dest}><span>{this.highlightSearch(item.dest ? item.dest: \"-\")}</span></p>\n          </div>\n        </td>\n        <td>\n          <div className={\"two-lines-cell large\"}>\n            <p className={\"table-row-value source text-left text-truncate\"} title={item.src_host}>{this.highlightSearch(item.src_host ? item.src_host: \"-\")}</p>\n            <p className={\"table-row-value destination text-left text-truncate\"} title={item.dest_host}>{this.highlightSearch(item.dest_host ? item.dest_host: \"-\")}</p>\n          </div>\n        </td>\n        <td>\n          <div className={\"two-lines-cell middle\"}>\n            <p className={\"table-row-value source text-center text-truncate\"} title={item.src_site}>{this.highlightSearch(item.src_site ? item.src_site: \"-\")}</p>\n            <p className={\"table-row-value destination text-center text-truncate\"} title={item.dest_site}>{this.highlightSearch(item.dest_site ? item.dest_site: \"-\")}</p>\n          </div>\n        </td>\n        <td>\n          <div className={\"two-lines-cell middle\"}>\n            <p className={\"table-row-value source text-center text-truncate\"} title={item.src_VO}>{this.highlightSearch(item.src_VO ? item.src_VO: \"-\")}</p>\n            <p className={\"table-row-value destination text-center text-truncate\"} title={item.dest_VO}>{this.highlightSearch(item.dest_VO ? item.dest_VO: \"-\")}</p>\n          </div>\n        </td>\n        <td>\n          <div className={\"two-lines-cell small\"}>\n            <p className={\"table-row-value source text-center\"}>{item.src_production ?\n              <i className=\"green im im-check-mark-circle-o\"/> : <i className=\"red im im-x-mark-circle-o\"/>}</p>\n            <p className={\"table-row-value destination text-center\"}>{item.dest_production ?\n              <i className=\"green im im-check-mark-circle-o\"/> : <i className=\" red im im-x-mark-circle-o\"/>}</p>\n          </div>\n        </td>\n        <td  className={\"border-right\"}>\n          <div className={\"one-lines-cell small\"}>\n            <p className={\"table-row-value text-center border-right\"}>{this.props.count}</p>\n          </div>\n        </td>\n      </tr>\n    )\n  }\n}\n\n\nclass PathsTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchQuery: \"\",\n      currentPage: {\n        value: 1,\n        mask: \"1\"\n      },\n      paginateBy: 5,\n      sortRules: {\n        columnName: \"count\",\n        asc: false\n      },\n      itemFocused: 0,\n      itemPressed: null,\n    };\n\n    this.handleJumpToPage = this.handleJumpToPage.bind(this);\n    this.handleSortRulesChange = this.handleSortRulesChange.bind(this);\n    this.handleItemFocused = this.handleItemFocused.bind(this);\n    this.handleSearchQueryChange = this.handleSearchQueryChange.bind(this);\n    this.handleItemPressed = this.handleItemPressed.bind(this);\n  }\n\n  handleSortRulesChange(sortRules) {\n    this.setState({sortRules})\n  }\n\n  handleJumpToPage(e, currentPage, maxPage) {\n    if (e !== null) {\n      let pageInput = e.target.value;\n      if (pageInput === \"\") {\n        currentPage = {\n          value: this.state.currentPage.value,\n          mask: pageInput,\n        };\n      } else {\n        currentPage = {\n          value: Number(pageInput),\n          mask: pageInput\n        }\n      }\n    }\n    if ((0 === currentPage.value) || (currentPage.value > maxPage)) {\n      if (0 === currentPage.value) {\n        currentPage.value = maxPage;\n        currentPage.mask = String(maxPage)\n      }\n      if (currentPage.value > maxPage) {\n        currentPage.value = 1;\n        currentPage.mask = String(1)\n      }\n    }\n\n    this.setState({currentPage})\n  }\n\n  handleItemFocused(itemFocused) {\n    this.setState({itemFocused})\n  }\n\n  handleSearchQueryChange(searchQuery) {\n    const currentPage = {\n      value: 1,\n      mask: \"1\"\n    };\n\n    this.setState({\n      searchQuery,\n      currentPage\n    })\n  }\n\n  handleItemPressed(itemPressed) {\n    if (itemPressed !== null) {\n      this.setState({itemPressed});\n      const pathID = document.getElementsByClassName(\"path-table-row\")[itemPressed].getAttribute(\"itemID\");\n      this.props.onPathSelected(pathID);\n      this.props.onHopSelected({selectedHop: null})\n    }\n\n    this.setState({itemPressed})\n  }\n\n  calculateStatistics(items) {\n    const itemsTotal = new Set(Array.from(this.props.paths, item => item[\"_source\"][\"route-sha1\"])).size;\n\n    if (items.length === 0) {\n      return {\n        itemsShown: items.length,\n        itemsTotal: itemsTotal,\n        shownFrom: 0,\n        shownTo: 0\n      }\n    } else {\n      const shownFrom = (this.state.currentPage.value - 1) * this.state.paginateBy + 1;\n      return {\n        itemsShown: items.length,\n        itemsTotal: itemsTotal,\n        shownFrom: shownFrom,\n        shownTo: shownFrom + this.state.paginateBy > items.length ? items.length: shownFrom + this.state.paginateBy - 1\n      };\n    }\n  }\n\n  calculateMaxPage(items) {\n    let maxPage = 1;\n    if (items.length) {\n      maxPage = Math.ceil(items.length/this.state.paginateBy);\n    }\n    return maxPage\n  }\n\n  countPaths(paths){\n    const count = {};\n    for (let i = 0; i < paths.length; i++) {\n      count[paths[i][\"_source\"][\"route-sha1\"]] = 1 + (count[paths[i][\"_source\"][\"route-sha1\"]] || 0)\n    }\n\n    return count\n  }\n\n  filterPaths(paths) {\n    const {searchQuery} = this.state;\n    const searchFields = [\"src\", \"dest\", \"src_host\", \"dest_host\", \"src_site\", \"dest_site\", \"src_VO\", \"dest_VO\"];\n\n    let buffer = [], processedItems = [];\n    for (let k = 0; k < paths.length; k++) {\n      if (buffer[paths[k][\"_source\"][\"route-sha1\"]]) continue;\n      buffer[paths[k][\"_source\"][\"route-sha1\"]] = true;\n\n      if (searchQuery) {\n        for (let j = 0; j < searchFields.length; j++) {\n          if (paths[k][\"_source\"][searchFields[j]]) {\n            if (paths[k][\"_source\"][searchFields[j]].toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0) {\n              processedItems.push(paths[k]);\n              break\n            }\n          }\n        }\n      } else {\n        processedItems.push(paths[k])\n      }\n    }\n\n    return processedItems\n  }\n\n  handleHideShow() {\n    const classList = document.getElementById(\"paths-table-container\").classList;\n    if (classList.contains(\"opened\")) {\n      classList.remove(\"opened\")\n    } else {\n      classList.add(\"opened\")\n    }\n  }\n\n  render() {\n\n    const paths = this.filterPaths(this.props.paths);\n    const pathsCount = this.countPaths(this.props.paths);\n    const statistics = this.calculateStatistics(paths);\n    const maxPage = this.calculateMaxPage(paths);\n\n    return (\n      <div id={\"paths-table-container\"} className={\"paths-table opened\"}>\n        <div className={\"paths-table-switcher\"}>\n          <button onClick={this.handleHideShow} onMouseDown={this.handleMouseDown} onMouseUp={this.handleMouseUp}>\n            <i className=\"im im-arrow-down\"/>\n          </button>\n        </div>\n        <div className={\"paths-table-wrapper\"}>\n          <div>\n            <div className={\"paths-table-tools\"}>\n              <div className={\"paths-table-tool-item\"}/>\n              <div className={\"paths-table-tool-item\"}>\n                <SearchBar\n                  searchQuery={this.state.searchQuery}\n                  onSearchBarChange={this.handleSearchQueryChange}\n                  itemFocused={this.state.itemFocused}\n                  paginateBy={this.state.paginateBy}\n                  currentPage={this.state.currentPage}\n                  maxPage={maxPage}\n                  tail={paths.length % this.state.paginateBy}\n                  onJumpToPageChange={this.handleJumpToPage}\n                  onItemFocused={this.handleItemFocused}\n                  onItemPressed={this.handleItemPressed}\n                />\n              </div>\n            </div>\n            <div className={\"paths-table-body\"}>\n              <Contents\n                paths={paths}\n                pathsCount={pathsCount}\n                searchQuery={this.state.searchQuery}\n                currentPage={this.state.currentPage}\n                paginateBy={this.state.paginateBy}\n                maxPage={maxPage}\n                onJumpToPageChange={this.handleJumpToPage}\n                statistics={statistics}\n                sortRules={this.state.sortRules}\n                onSortRulesChange={this.handleSortRulesChange}\n                itemFocused={this.state.itemFocused}\n                selectedPath={this.props.selectedPath}\n                onItemFocused={this.handleItemFocused}\n                onItemPressed={this.handleItemPressed}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default PathsTable\n","import moment from \"moment\";\n\nfunction preparePathData(paths, selectedPath, pathInfo) {\n  let data = {\n    labels: [],\n    datasets: [{\n      label: 'Hops',\n      backgroundColor: 'rgba(72,72,72,0.5)',\n      borderColor: 'rgba(72,72,72,1)',\n      borderWidth: 1,\n      outlierColor: '#ff2b71',\n      padding: 10,\n      itemRadius: 0,\n      data: []\n    }],\n    pathInfo: null\n  };\n\n  if (!selectedPath) {\n    return data\n  }\n\n  paths = paths.filter((path) => path[\"_source\"][\"route-sha1\"] === selectedPath);\n  if (pathInfo.filterWrongMeasurements) {\n    paths = this.filterWrongMeasurements(paths)\n  }\n\n  if (!paths.length) {\n    return data\n  }\n\n  const ttlsRtts = paths.map(path => {\n    const ttls = path[\"_source\"][\"ttls\"];\n    const rtts = path[\"_source\"][\"rtts\"];\n    return ttls.map((element, idx) => [element, rtts[idx]])\n  });\n\n  const xCoords = [];\n  ttlsRtts[0].forEach(e => xCoords.push(e[0]));\n\n  let rtts = [];\n  ttlsRtts.forEach(rttsValues => {\n    rtts.push(rttsValues.map(values => values[1]))\n  });\n\n  const rttsByTtls = rtts[0].map((col, i) => rtts.map(row => row[i]));\n\n  data.labels = xCoords;\n  data.datasets[0].data = rttsByTtls;\n  data.pathInfo = paths[0];\n\n  return data\n}\n\nfunction DispatchUrl(urlSearchParams) {\n  const urlParams = new URLSearchParams(urlSearchParams);\n  const urlData = JSON.parse(urlParams.get(\"query\"));\n  const esQuery = urlData.es_query;\n  const mustConditions = esQuery.query.bool.must;\n\n  const query = {\n    datetimeFrom: moment.unix(urlParams.get(\"datetimeFrom\")/1000),\n    datetimeTo: moment.unix(urlParams.get(\"datetimeTo\")/1000),\n    sources: [],\n    sources_hosts: [],\n    destinations: [],\n    destinations_hosts: [],\n    virtual_organisations: [], // not here yet\n    IPv6: false\n  };\n\n  for (let i = 0; i < mustConditions.length; i++) {\n    const condition = mustConditions[i];\n    if (\"range\" in condition) {\n      query.datetimeFrom = moment.unix(condition.range.timestamp.gte/1000);\n      query.datetimeTo = moment.unix(condition.range.timestamp.lte/1000);\n    } else {\n      if (\"term\" in condition) {\n        query.IPv6 = condition.term.ipv6\n      } else {\n        for (let j = 0; j < condition.bool.should.length; j++) {\n          const conditionTerms = condition.bool.should[j].terms;\n          if (\"src\" in conditionTerms) {\n            query.sources = conditionTerms.src\n          }\n          if (\"src_host\" in conditionTerms) {\n            query.sources_hosts = conditionTerms.src_host\n          }\n          if (\"dest\" in conditionTerms) {\n            query.destinations = conditionTerms.dest\n          }\n          if (\"dest_host\" in conditionTerms) {\n            query.destinations_hosts = conditionTerms.dest_host\n          }\n        }\n      }\n    }\n  }\n\n  return query\n}\n\n/**\n * @return {string}\n */\nfunction PackUrl(query) {\n\n  const srcShould = [];\n  if (query.sources.length) {\n    srcShould.push({\n      terms: {\n        src: query.sources\n      }\n    })\n  }\n\n  if (query.sources_hosts.length) {\n    srcShould.push({\n      terms: {\n        src_host: query.sources_hosts\n      }\n    })\n  }\n\n  const destShould = [];\n  if (query.destinations.length) {\n    destShould.push({\n      terms: {\n        dest: query.destinations\n      }\n    })\n  }\n\n  if (query.destinations_hosts.length) {\n    destShould.push({\n      terms: {\n        dest_host: query.destinations_hosts\n      }\n    })\n  }\n\n  const newQuery = {\n    es_query: {\n      query: {\n        bool: {\n          must: [\n            {\n              range: {\n                timestamp: {\n                  gte: moment.unix(query.datetimeFrom)/1000,\n                  lte: moment.unix(query.datetimeTo)/1000,\n                }\n              }\n            },\n            {\n              term: {\n                ipv6: query.IPv6\n              }\n            },\n            {\n              bool: {\n                should: srcShould\n              }\n            },\n            {\n              bool: {\n                should: destShould\n              }\n            }\n          ]\n        }\n      }\n    },\n    parameters: {}\n  };\n\n  return `?query=${JSON.stringify(newQuery)}`;\n}\n\nexport const dispatchUrl = (url) => {\n  return DispatchUrl(url)\n};\n\nexport const packUrl = (query) => {\n  return PackUrl(query)\n};\n\nexport default preparePathData","import ChartComponent from 'react-chartjs-2';\nimport React, {Component} from 'react';\nimport 'chartjs-chart-box-and-violin-plot';\nimport \"./css/path-chart.css\"\nimport preparePathData from '../../utils/common'\n\n\nclass PathChart extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.getOptions = this.getOptions.bind(this);\n  }\n\n  filterWrongMeasurements(paths) {\n    const higherZero = (number) => number > 0;\n    paths = paths.filter(path => path[\"_source\"][\"rtts\"].every(higherZero));\n\n    return paths\n  }\n\n  getOptions() {\n    const convertStats = (stats) => {\n      let { min, q1, median, q3, max } = stats;\n      min = min.toFixed(2);\n      q1 = q1.toFixed(2);\n      median = median.toFixed(2);\n      q3 = q3.toFixed(2);\n      max = max.toFixed(2);\n\n      return { min, q1, median, q3, max }\n    };\n\n    return {\n      onClick: (event, item) => {\n        if (item.length) {\n          const pathNavigation = {\n            selectedHop: Number(item[0]._model.label)\n          };\n          this.props.onHopSelected(pathNavigation)\n        }\n      },\n      tooltips: {\n        callbacks: {\n          title: function (tooltipItems) {\n            return `Hop № ${tooltipItems[0].xLabel}`\n          },\n          boxplotLabel: function (item, data, stats, hoveredOutlierIndex) {\n            let {min, q1, median, q3, max} = convertStats(stats);\n            return `min: ${min} max:${max} q1:${q1} median:${median} q3:${q3}`;\n          },\n          violinLabel: function (item, data, stats) {\n            let {min, q1, median, q3, max} = convertStats(stats);\n            return [\n              `min: ${min} max:${max}`,\n              `median:${median}`,\n              `q1:${q1} q3:${q3}`\n            ]\n          },\n        }\n      }\n    }\n  }\n\n  handleHideShow() {\n    const classList = document.getElementById(\"path-chart\").classList;\n    if (classList.contains(\"opened\")) {\n      classList.remove(\"opened\")\n    } else {\n      classList.add(\"opened\")\n    }\n  }\n\n  handleChartResize() {\n    const chartElement = document.getElementById(\"path-chart\");\n    const classList = chartElement.classList;\n\n    const resizeIcon = document.getElementById(\"path-chart-resize-icon\");\n    const iconClassList = resizeIcon.classList;\n\n    const pathInfoContainer = document.getElementsByClassName(\"path-info-container\");\n\n    if (classList.contains(\"maximized\")) {\n      classList.remove(\"maximized\");\n      pathInfoContainer[0].classList.remove(\"maximize-impact\");\n\n      iconClassList.remove(\"im-minimize\");\n      iconClassList.add(\"im-maximize\")\n    } else {\n      classList.add(\"maximized\");\n\n      pathInfoContainer[0].classList.add(\"maximize-impact\");\n      iconClassList.remove(\"im-maximize\");\n      iconClassList.add(\"im-minimize\")\n    }\n\n    const chartHeight = chartElement.clientHeight;\n    const restScreenHeight = document.getElementsByTagName(\"body\")[0].clientHeight - chartHeight - 75;\n    document.getElementsByClassName(\"path-viewer-fragments\")[0].style.height = restScreenHeight + \"px\"\n  }\n\n  render() {\n    let {paths, selectedPath, pathInfo, pathChartRef} = this.props;\n    const pathChartData = preparePathData(paths, selectedPath, pathInfo);\n    const options = this.getOptions();\n\n    return (\n      <div id={\"path-chart\"} ref={pathChartRef} className={\"path-viewer-container\"}>\n        <div className={\"path-viewer\"}>\n          <div className={\"path-viewer-switcher\"}>\n            <button onClick={this.handleHideShow}>\n              <i className=\"im im-arrow-left\"/>\n            </button>\n          </div>\n          <div className={\"path-viewer-switcher resize\"}>\n            <button onClick={this.handleChartResize}>\n              <i id={\"path-chart-resize-icon\"} className=\"im im-maximize\"/>\n            </button>\n          </div>\n          <div className={\"path-viewer-content\"}>\n            <div className={\"path-viewer-wrapper chart\"}>\n              <h3>Hops chart</h3>\n              <div className={\"path-viewer-chart\"}>\n                <ChartComponent\n                  data={pathChartData}\n                  options={options}\n                  legend={false}\n                  ref={ref => this.chartInstance = ref && ref.chartInstance}\n                  type='violin'\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default PathChart;\n","// Constants.js\nconst prod = {\n  url: {\n    API_URL: \"/api/\"\n  }\n};\n\nconst dev = {\n  url: {\n    API_URL: \"http://localhost:8000/api/\"\n  }\n};\n\nexport const config = process.env.NODE_ENV === \"development\" ? dev : prod;","import React, {Component} from 'react';\nimport 'chartjs-chart-box-and-violin-plot';\nimport \"./css/path-info.css\"\nimport PerfectScrollbar from 'react-perfect-scrollbar'\nimport preparePathData from '../../utils/common'\nimport { config } from '../../constants'\n\n\nclass ASNumberLabel extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      asnData: null\n    }\n  }\n\n  async componentDidMount() {\n    const {asn} = this.props;\n\n    let asnData = JSON.parse(localStorage.getItem(`asn-${asn}`));\n    if (!asnData) {\n      const response = await fetch(`${config.url.API_URL}asn/${asn}`);\n      // const response = await fetch(`/api/asn/${asn}`);\n      const response_content = await response.json();\n      if (response_content.status) {\n        asnData = response_content.item;\n        localStorage.setItem(`asn-${asn}`, JSON.stringify(asnData))\n      }\n    }\n\n    this.setState({asnData})\n  }\n\n  render() {\n    const {asnData} = this.state;\n\n    if (!asnData) {\n      return <div className={\"asn-label\"}>Loading...</div>\n    } else {\n      return (\n        <div className={\"asn-label\"}>\n          <table>\n            <tbody>\n            <tr>\n              <th>Name</th>\n              <td>{asnData[\"Name\"] ? asnData[\"Name\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Description</th>\n              <td>{asnData[\"Description\"] ? asnData[\"Description\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Website</th>\n              <td>\n                {asnData[\"Website\"] ? <a\n                  className={\"asn-website\"}\n                  href={asnData[\"Website\"]}\n                  target={\"_blank\"}>\n                  {asnData[\"Website\"]}\n                </a>: \"-\"}\n              </td>\n            </tr>\n            <tr>\n              <th>Country</th>\n              <td>{asnData[\"Country\"] ? asnData[\"Country\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>E-mail contracts</th>\n              <td>{asnData[\"E-mail contracts\"] ? asnData[\"E-mail contracts\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Abuse contracts</th>\n              <td>{asnData[\"Abuse contracts\"] ? asnData[\"Abuse contracts\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Traffic estimation</th>\n              <td>{asnData[\"Traffic estimation\"] ? asnData[\"Traffic estimation\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Traffic ratio</th>\n              <td>{asnData[\"Traffic ratio\"] ? asnData[\"Traffic ratio\"]: \"-\"}</td>\n            </tr>\n            <tr>\n              <th>Owner address</th>\n              <td>{asnData[\"Owner address\"] ? asnData[\"Owner address\"]: \"-\"}}</td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      )\n    }\n  }\n}\n\nclass PathNode extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isHovered: false\n    }\n  }\n\n  handleEnter() {\n    this.setState({isHovered: true})\n  }\n\n  handleLeave() {\n    this.setState({isHovered: false})\n  }\n\n  render() {\n    const {nodeType, value, extraValue, label, asn} = this.props;\n    let variablePart;\n    if (extraValue) {\n      variablePart = <span>({extraValue})</span>\n    } else {\n      if (asn) {\n        variablePart = <div className={\"asn-container\"} onMouseEnter={this.handleEnter.bind(this)} onMouseLeave={this.handleLeave.bind(this)}>\n          <span>asn:</span><span>{asn}</span>{this.state.isHovered ? <ASNumberLabel asn={asn}/>: <span/>}\n        </div>\n      } else {\n        variablePart = <span/>\n      }\n    }\n\n    return (\n      <div className={\"path-fragment node \" + nodeType}>\n        <div className={\"node-type\"}>\n          <span>{label}</span>\n        </div>\n        <div className={\"node-info\"}>\n          <span title={value} >{value}</span>\n          {variablePart}\n        </div>\n      </div>\n    )\n  }\n}\n\nclass PathHop extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleHopSelected = this.handleHopSelected.bind(this)\n  }\n\n  handleHopSelected() {\n    const {hopNumber, onHopSelected} = this.props;\n\n    const pathNavigation = {\n      selectedHop: hopNumber\n    };\n    onHopSelected(pathNavigation)\n  }\n\n  render() {\n    const { stats, hopSelected} = this.props;\n\n    return (\n      <div onClick={this.handleHopSelected} className={\"path-fragment hop stats\" + (hopSelected ? \" active\": \"\")}>\n        <div className={\"stats-group less\"}>\n          <div className={\"stats-item min\"}>\n            <span className={\"label\"}>{\"Min: \"}</span>\n            <span className={\"value\"}>{stats ? stats.min.toFixed(2): \"-\"}</span>\n          </div>\n          <div className={\"stats-item q1\"}>\n            <span className={\"label\"}>{\"Q1: \"}</span>\n            <span className={\"value\"}>{stats ? stats.q1.toFixed(2): \"-\"}</span>\n          </div>\n        </div>\n        <div className={\"stats-group middle\"}>\n          <div className={\"stats-item median\"}>\n            <span className={\"label\"}>{\"Std. dev.\"}</span>\n            <span className={\"value\"}>{stats ? stats.stdDev.toFixed(2): \"-\"}</span>\n          </div>\n          <div className={\"stats-item median\"}>\n            <span className={\"label\"}>{\"Median\"}</span>\n            <span className={\"value\"}>{stats ? stats.median.toFixed(2): \"-\"}</span>\n          </div>\n        </div>\n        <div className={\"stats-group more\"}>\n          <div className={\"stats-item max\"}>\n            <span className={\"label\"}>{\"Max: \"}</span>\n            <span className={\"value\"}>{stats ? stats.max.toFixed(2): \"-\"}</span>\n          </div>\n          <div className={\"stats-item q3\"}>\n            <span className={\"label\"}>{\"Q3: \"}</span>\n            <span className={\"value\"}>{stats ? stats.q3.toFixed(2): \"-\"}</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass PathInfo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.pathInfoRef = React.createRef();\n    this.pathViewerFragments = React.createRef();\n    this.scrollBarRef = React.createRef();\n\n    this.getPathFragments = this.getPathFragments.bind(this);\n    this.handleHopSelected = this.handleHopSelected.bind(this);\n    this.handleHideShow = this.handleHideShow.bind(this);\n  }\n\n  componentDidMount() {\n    const chartHeight = this.props.pathChart.current.clientHeight;\n    const restScreenHeight = document.getElementsByTagName(\"body\")[0].clientHeight - chartHeight - 75;\n    document.getElementsByClassName(\"path-viewer-fragments\")[0].style.height = restScreenHeight + \"px\"\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    let scrollTop = -this.pathViewerFragments.current.scrollHeight/2.5;\n    const elements = document.getElementsByClassName(\"path-fragment\");\n    let flag = false;\n    for (let i = 0; i < elements.length; i++) {\n      if (elements[i].classList.contains(\"active\")) {\n        flag = true;\n        break\n      } else {\n        scrollTop += elements[i].scrollHeight\n      }\n    }\n\n    if (flag) {\n      this.scrollBarRef.current[\"_container\"].scrollTo({\n        top: scrollTop,\n        behavior: \"smooth\"\n      });\n    }\n  }\n\n  filterWrongMeasurements(paths) {\n    const higherZero = (number) => number > 0;\n    paths = paths.filter(path => path[\"_source\"][\"rtts\"].every(higherZero));\n\n    return paths\n  }\n\n  getPathFragments(pathInfoData) {\n    const { selectedHop, pathsStats } = this.props;\n    const content = [];\n    const {labels, pathInfo} = pathInfoData;\n    if (pathInfo !== null) {\n\n      let pathData = {};\n      pathInfo[\"_source\"][\"ttls\"].forEach((ttl, i) => {\n        pathData[ttl] = {\n          hop: pathInfo[\"_source\"][\"hops\"][i],\n          asn: pathInfo[\"_source\"][\"asns\"][i],\n          stats: pathsStats[`${pathInfo[\"_source\"][\"route-sha1\"]}-${ttl}`]\n        };\n      });\n\n      content.push(\n        <PathNode\n          key={pathInfo[\"_source\"][\"src\"] + pathInfo[\"_source\"][\"route-sha1\"]}\n          label={\"src\"}\n          nodeType={\"src\"}\n          value={pathInfo[\"_source\"][\"src\"]}\n          extraValue={pathInfo[\"_source\"][\"src_host\"]}\n        />\n      );\n\n      let offset = 1;\n      let destNumber = Math.max(...labels);\n      labels.forEach((hopNumber, i) => {\n        while (i + offset < hopNumber) {\n          content.push(\n            <PathHop\n              key={(i + offset) + \"Hop\" + pathInfo[\"_source\"][\"route-sha1\"]}\n              hopSelected={(i + offset) === selectedHop}\n              hopNumber={(i + offset)}\n              onHopSelected={this.props.onHopSelected}\n            />\n          );\n          content.push(\n            <PathNode\n              key={(i + offset) + \"-node-\" + pathInfo[\"_source\"][\"route-sha1\"]}\n              nodeType={\"missed \" + ((i + offset) === destNumber ? \"dest\": \"hop\")}\n              label={(i + offset) === destNumber ? \"dest\": \"Node №\" + (i + offset)}\n              value={\"No data\"}\n            />\n          );\n          offset += 1;\n        }\n\n        if (hopNumber === i + offset) {\n          const {hop, asn, stats} = pathData[hopNumber];\n          content.push(\n            <PathHop\n              key={(i + offset) + \"Hop\" + pathInfo[\"_source\"][\"route-sha1\"]}\n              hopSelected={(i + offset) === selectedHop}\n              stats={stats}\n              hopNumber={(i + offset)}\n              onHopSelected={this.props.onHopSelected}\n            />\n          );\n          content.push(\n            <PathNode\n              key={(i + offset) + \"-node-\" + pathInfo[\"_source\"][\"route-sha1\"]}\n              nodeType={(i + offset) === destNumber ? \"dest\" + (pathInfo[\"_source\"][\"dest\"] === hop ? \"\":\" incomplete\") : \"hop\"}\n              label={(i + offset) === destNumber ? \"dest\": \"Node №\" + (i + offset)}\n              value={hop}\n              asn={asn}\n            />\n          )\n        }\n      })\n    } else {\n      content.push(<div key={\"path-no-data\"} className={\"no-data\"}><span>No data</span></div>)\n    }\n\n    return content\n  }\n\n  handleHideShow() {\n    const classList = this.pathInfoRef.current.classList;\n    if (classList.contains(\"opened\")) {\n      classList.remove(\"opened\")\n    } else {\n      classList.add(\"opened\")\n    }\n  }\n\n  handleHopSelected(event) {\n    console.log(event);\n    // const pathNavigation = {\n    //   selectedHop: Number(hopSelected)\n    // };\n    // this.props.onHopSelected(pathNavigation)\n  }\n\n  render() {\n    const {paths, selectedPath, pathInfo} = this.props;\n\n    const pathInfoData = preparePathData(paths, selectedPath, pathInfo);\n    const pathFragments = this.getPathFragments(pathInfoData);\n\n    return (\n      <div id={\"path-info\"} ref={this.pathInfoRef} className={\"path-viewer-container\"}>\n        <div className={\"path-viewer\"}>\n          <div className={\"path-viewer-switcher\"}>\n            <button onClick={this.handleHideShow} onMouseDown={this.handleMouseDown} onMouseUp={this.handleMouseUp}>\n              <i className=\"im im-arrow-left\"/>\n            </button>\n          </div>\n          <div className={\"path-viewer-content\"}>\n            <div className={\"path-viewer-wrapper\"}>\n              <h3>Path info</h3>\n              <div ref={this.pathViewerFragments} className={\"path-viewer-fragments\"}>\n                <PerfectScrollbar ref={this.scrollBarRef}>\n                  <div className={\"path-viewer-fragments-content\"}>\n                    {pathFragments}\n                  </div>\n                </PerfectScrollbar>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default PathInfo;\n","import React, {Component} from 'react';\nimport './css/force-directed-graph.css'\nimport {ForceGraph3D} from 'react-force-graph';\nimport {SphereGeometry, Mesh, MeshBasicMaterial} from 'three';\n\nconst shapes = {\n  \"LargeSphere\": new SphereGeometry(10, 32, 32),\n  \"sphere\": new SphereGeometry(5, 32, 32)\n};\n\nclass Node {\n  constructor(id, type, number, pathHash) {\n    this.id = id;\n    this.type = type;\n    this.number = number;\n    this.pathHash = pathHash;\n    this.label = this.getLabel();\n  }\n\n  getLabel() {\n    let label;\n    switch (this.type) {\n      case 'src':\n        label = `<span class=\"tooltip-content\">Source: ${this.id}</span>`;\n        break;\n      case 'dest':\n        label = `<span class=\"tooltip-content\">Destination: ${this.id}</span>`;\n        break;\n      case 'hop':\n        label = `<span class=\"tooltip-content\">Node №${this.number}: ${this.id}</span>`;\n        break;\n      case \"src-dest\":\n        label = `<span class=\"tooltip-content\">Source&Destination: ${this.id}</span>`;\n        break;\n      case 'missed-hop':\n        label = `<span class=\"tooltip-content\">Missed node №${this.number}</span>`;\n        break;\n      default:\n        label = this.id\n    }\n\n    return label\n  }\n\n  get color() {\n    let color;\n    switch (this.type) {\n      case \"src\":\n        color = '#ff2b83';\n        break;\n      case \"dest\":\n        color = '#0a7cb3';\n        break;\n      case \"src-dest\":\n        color = '#ad2bff';\n        break;\n      case \"missed-hop\":\n        color = '#ff832b';\n        break;\n      default:\n        color = '#484848'\n    }\n\n    return color\n  }\n\n  get shape() {\n    let shape;\n    switch (this.type) {\n      case \"src\":\n        shape = 'LargeSphere';\n        break;\n      case \"dest\":\n        shape = 'LargeSphere';\n        break;\n      case \"src-dest\":\n        shape = 'LargeSphere';\n        break;\n      default:\n        shape = 'sphere'\n    }\n\n    return shape\n  }\n}\n\nclass Link {\n  constructor(source, target, hopNumber, pathHash, hopStats, completed) {\n    this.id = `${pathHash}-${hopNumber}`;\n    this.source = source.id;\n    this.target = target.id;\n    this.hopNumber = hopNumber;\n    this.pathHash = pathHash;\n    this.hopStats = hopStats;\n    this.curvature = 0;\n    this.rotation = 0;\n    this.distance = this.getDistance();\n    this.velocity = this.getVelocity();\n    this.color = '#484848';\n    this.completed = completed;\n  }\n\n  getDistance() {\n    let dist = 5;\n    if (this.hopStats) {\n      dist = this.hopStats.median;\n      if (dist <= 5) {\n        dist = 5\n      }\n    }\n\n    return dist\n  }\n\n  getVelocity() {\n    let velocity = 0.4;\n    if (this.hopStats) {\n      if (this.hopStats.median <= 0) {\n        velocity = 0.4\n      } else {\n        velocity = Math.exp(-0.05 * (this.hopStats.median + 40));\n      }\n    }\n\n    return velocity\n  }\n\n  set calculateCurvature(counter) {\n    this.curvature = 0.3 * counter\n  }\n\n  get calculateCurvature() {\n    return this.curvature\n  }\n\n  set calculateRotation(counter) {\n    this.rotation = Number((Math.PI * counter / 6).toFixed(3))\n  }\n\n  get calculateRotation() {\n    return this.rotation\n  }\n}\n\nclass GraphData {\n  constructor() {\n    this.nodes = {};\n    this.links = {};\n\n    this.nodesConnectionsCounter = {};\n  }\n\n  addNode(node) {\n    if (node.id in this.nodes && node.type !== 'hop') {\n      if ((node.type === \"src\" && this.nodes[node.id].type === \"dest\") ||\n        (node.type === \"dest\" && this.nodes[node.id].type === \"src\")) {\n        node.type = \"src-dest\";\n        node.label = node.getLabel()\n      }\n        this.nodes[node.id] = node\n    } else {\n      this.nodes[node.id] = node\n    }\n  }\n\n  addLink(link) {\n    if (!(link.id in this.links)) {\n      this.nodesConnectionsCounter[link.source] = this.nodesConnectionsCounter[link.source] ? this.nodesConnectionsCounter[link.source] + 1: 1;\n\n      link.calculateCurvature = this.nodesConnectionsCounter[link.source];\n      link.calculateRotation = this.nodesConnectionsCounter[link.source];\n      this.links[link.id] = link;\n\n    }\n  }\n\n  jsonData() {\n    return {\n      nodes: Object.values(this.nodes),\n      links: Object.values(this.links)\n    }\n  }\n}\n\nclass ForceDirectedGraph extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      graphData: {\n        nodes: [],\n        links: []\n      }\n    };\n\n    this.graphRef = React.createRef();\n\n    this.focusOnHop = this.focusOnHop.bind(this);\n    this.prepareData = this.prepareData.bind(this);\n    this.getLinkLabel = this.getLinkLabel.bind(this);\n    this.handleHopPressed = this.handleHopPressed.bind(this);\n  }\n\n  getLinkLabel(linkId) {\n    const {pathsStats} = this.props;\n    const hopStats = pathsStats[linkId];\n    return `<div class=\"tooltip-content\">\n              <table>\n                <tr>\n                  <th><span class=\"label\">Min: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.min.toFixed(2): \"-\"}</span></td>\n                  <th><span class=\"label\">Std. dev.: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.stdDev.toFixed(2): \"-\"}</span></td>\n                  <th><span class=\"label\">Max: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.max.toFixed(2): \"-\"}</span></td>\n                </tr>\n                <tr>\n                  <th><span class=\"label\">Q1: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.q1.toFixed(2): \"-\"}</span></td>\n                  <th><span class=\"label\">Median: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.median.toFixed(2): \"-\"}</span></td>\n                  <th><span class=\"label\">Q3: </span></th>\n                  <td><span class=\"value\">${hopStats ? hopStats.q3.toFixed(2): \"-\"}</span></td>\n                </tr>\n            </table>\n          </div>`\n  }\n\n  componentDidMount() {\n    const graphData = this.prepareData();\n    this.graphRef.current.d3Force('link').distance(link => link.distance);\n    this.setState({graphData})\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.responseData !== prevProps.responseData) {\n      const graphData = this.prepareData();\n      this.setState({graphData})\n    }\n\n    if (this.props.selectedHop !== prevProps.selectedHop) {\n      const {selectedPath, selectedHop} = this.props;\n      this.graphRef.current.d3Force('link').distance(link => {\n        if (`${selectedPath}-${selectedHop}` === link.id) {\n          this.focusOnHop(link)\n        }\n\n        return link.distance\n      });\n    }\n  }\n\n  handleHopPressed(hopPressed) {\n    const {selectedPath, selectedHop} = this.props;\n    if (selectedPath === hopPressed.pathHash && selectedHop === hopPressed.hopNumber) {\n      this.props.onPathSelected(null);\n      this.props.onHopSelected({selectedHop: null})\n    } else {\n\n      if (selectedPath === hopPressed.pathHash && selectedHop !== hopPressed.hopNumber) {\n        this.props.onHopSelected({selectedHop: hopPressed.hopNumber})\n      } else {\n        this.props.onPathSelected(hopPressed.pathHash);\n        this.props.onHopSelected({selectedHop: hopPressed.hopNumber})\n      }\n    }\n\n    this.graphRef.current.refresh();\n\n  }\n\n  focusOnHop(hop) {\n    if (hop[\"__arrowObj\"]) {\n      const position = hop[\"__arrowObj\"].position;\n\n      const distance = 250;\n      const distRatio = 1 + distance/Math.hypot(position.x, position.y, position.z);\n\n      this.graphRef.current.cameraPosition(\n        { x: position.x * distRatio, y: position.y * distRatio, z: position.z * distRatio},\n        position,\n        3000\n      );\n    }\n  }\n\n  prepareData() {\n    const { responseData, pathsStats } = this.props;\n    const hits = responseData['hits']['hits'];\n\n    const graphData = new GraphData();\n\n    for (let i = 0; i < hits.length; i++) {\n      const record = hits[i]['_source'];\n      const pathHash = record['route-sha1'];\n\n      const hops = record['hops'];\n      const ttls = record['ttls'];\n\n      const src = new Node(record['src'],'src', 0, pathHash);\n      graphData.addNode(src);\n      const dest = new Node(record['dest'],'dest', hops.length - 1, pathHash);\n      graphData.addNode(dest);\n\n      const completed = dest.id === hops[hops.length - 1];\n      let previousNode = src;\n\n      let offset = 1;\n      hops.forEach((hop, idx) => {\n        const ttl = ttls[idx];\n        while (idx + offset < ttl) {\n          const missedNode = new Node(`${pathHash}-${idx + offset}`, 'missed-hop', idx + offset, pathHash);\n          graphData.addNode(missedNode);\n          graphData.addLink(new Link(previousNode, missedNode, idx + offset, pathHash, pathsStats[`${pathHash}-${idx + offset}`], completed));\n          previousNode = missedNode;\n          offset += 1\n        }\n\n        const node = new Node(hop, 'hop', idx + offset, pathHash);\n\n        if (idx !== hops.length - 1) {\n          graphData.addNode(node);\n          graphData.addLink(new Link(previousNode, node, ttl, pathHash, pathsStats[`${pathHash}-${ttl}`], completed));\n          previousNode = node\n        } else {\n          if (completed) {\n            graphData.addLink(new Link(previousNode, dest, ttl, pathHash, pathsStats[`${pathHash}-${ttl}`], completed));\n          } else {\n            graphData.addNode(node);\n            graphData.addLink(new Link(previousNode, node, ttl, pathHash, pathsStats[`${pathHash}-${ttl}`], completed));\n            graphData.addLink(new Link(node, dest, ttl + 1, pathHash, pathsStats[`${pathHash}-${ttl}`], completed));\n          }\n        }\n      })\n\n    }\n\n    return graphData.jsonData()\n\n  }\n\n  render() {\n    const {selectedPath, selectedHop} = this.props;\n\n    return (\n      <ForceGraph3D\n        graphData={this.state.graphData}\n        ref={this.graphRef}\n        backgroundColor={\"#ffffff\"}\n        linkWidth={2.5}\n        linkCurvature={d => d.curvature}\n        linkCurveRotation={d => d.rotation}\n        linkDirectionalArrowLength={10}\n        linkDirectionalArrowRelPos={1}\n        linkColor={link => link.pathHash === selectedPath ? `${selectedPath}-${selectedHop}` === link.id ? \"#21bda8\": \"#bd1d4f\": \"#484848\"}\n        linkDirectionalParticles={link => link.pathHash === selectedPath ? 3: 0}\n        linkDirectionalParticleWidth={4}\n        linkDirectionalParticleSpeed={d => d.velocity}\n        nodeLabel={n => n.label}\n        linkLabel={l => this.getLinkLabel(l.id)}\n        showNavInfo={false}\n        onLinkClick={link => this.handleHopPressed(link)}\n        nodeThreeObject={({ shape, color}) => new Mesh(\n          shapes[shape],\n          new MeshBasicMaterial({color})\n        )}\n      />\n    )\n  }\n\n}\n\nexport default ForceDirectedGraph;\n","import React, {Component} from 'react';\nimport './css/request.css'\n\n\nclass RequestLoader extends Component {\n  render() {\n    return (\n      <div id={\"loader\"} className={this.props.hidden ? \"loader hidden\": \"loader\"}>\n        <div className={\"loader-inner\"}>\n          <div className=\"container\">\n            <div className=\"dot-container\">\n              <div className=\"dot src\"/>\n              <div className=\"dot\"/>\n              <div className=\"dot\"/>\n            </div>\n            <div className=\"dot-container\">\n              <div className=\"dot\"/>\n              <div className=\"dot missed\"/>\n              <div className=\"dot\"/>\n            </div>\n            <div className=\"dot-container\">\n              <div className=\"dot src-dest\"/>\n              <div className=\"dot\"/>\n              <div className=\"dot dest\"/>\n            </div>\n          </div>\n          <p>Loading</p>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default RequestLoader;\n","import React, {Component} from 'react';\nimport './css/preview.css'\n\nclass ItemsPreview extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.focusOnFilter = this.focusOnFilter.bind(this)\n  }\n\n  focusOnFilter() {\n    const container = this.props.queryContainer.current;\n    if (!container.classList.contains(\"opened\")) {\n      container.classList.add(\"opened\")\n    }\n\n    const {itemID} = this.props;\n    const switcher = document.getElementById(`${itemID}-switcher`);\n    switcher.click()\n  }\n\n  render() {\n    const {name, items} = this.props;\n\n    if (!items.length) {\n      return <div/>\n    }\n\n    return (\n      <div className={\"filter-preview-item\"}>\n        <button onClick={this.focusOnFilter} className={\"focus-on-ipv\"}>{name}: <span className={\"items-counter\"}>{items.length}</span></button>\n      </div>\n    )\n  }\n}\n\nclass IPv6Preview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.switchIPv = this.switchIPv.bind(this)\n  }\n\n  switchIPv () {\n    if (this.props.IPv6) {\n      document.getElementById(\"ipv4-selection\").click()\n    } else {\n      document.getElementById(\"ipv6-selection\").click()\n    }\n\n    const {triggerRequest} = this.props;\n\n    setTimeout(function () {\n      triggerRequest()\n    }, 1000)\n\n  }\n\n  render() {\n    const { IPv6 } = this.props;\n    return (\n      <div className={\"filter-preview-item\"}>\n        <button onClick={this.switchIPv} className={\"focus-on-ipv\"}>{IPv6 ? \"IPv6\": \"IPv4\"}</button>\n      </div>\n    )\n  }\n}\n\nclass TimePreview extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.focusDatetimeFrom = this.focusDatetimeFrom.bind(this);\n    this.focusDatetimeTo = this.focusDatetimeTo.bind(this)\n  }\n\n  focusDatetimeFrom() {\n    const container = document.getElementById(\"time-query\");\n    if (!container.classList.contains(\"opened\")) {\n      const switcher = document.getElementsByClassName(\"search-query-switcher\")[0];\n      switcher.childNodes[0].click()\n    }\n\n    this.focusInput(0)\n  }\n\n  focusDatetimeTo() {\n    const container = document.getElementById(\"time-query\");\n    if (!container.classList.contains(\"opened\")) {\n      const switcher = document.getElementsByClassName(\"search-query-switcher\")[0];\n      switcher.childNodes[0].click()\n    }\n\n    this.focusInput(1)\n  }\n\n  focusInput(index) {\n    const inputs = document.getElementsByClassName(\"form-control\");\n    inputs[index].click()\n  }\n\n  render() {\n    const { datetimeFrom, datetimeTo } = this.props;\n\n    return (\n      <div className={\"filter-preview-item\"}>\n        <i className=\"im im-history\"/>\n        <button onClick={this.focusDatetimeFrom} className={\"focus-on-time\"}>{datetimeFrom.toISOString().slice(0, 19).replace(\"T\", \" \")}</button>\n        <i className=\"im im-arrow-right\"/>\n        <button onClick={this.focusDatetimeTo} className={\"focus-on-time\"}>{datetimeTo.toISOString().slice(0, 19).replace(\"T\", \" \")}</button>\n      </div>\n    )\n  }\n}\n\nclass FiltersPreview extends Component {\n  render() {\n    const { query, itemsFilters, queryContainer } = this.props;\n\n    const itemsFiltersContent = [];\n    itemsFilters.forEach((item, i) => {\n      itemsFiltersContent.push(\n        <ItemsPreview\n          queryContainer={queryContainer}\n          key={`${i}-filter-preview`}\n          name={item.title}\n          items={query[item.id]}\n          itemID={item.id}\n        />\n      )\n    });\n\n    return (\n      <div className={\"filter-preview\"}>\n        <div className={\"filter-preview-inner\"}>\n          <TimePreview\n            datetimeFrom={query.datetimeFrom}\n            datetimeTo={query.datetimeTo}\n          />\n          <IPv6Preview\n            IPv6={query.IPv6}\n            triggerRequest={this.props.triggerRequest}\n          />\n          {itemsFiltersContent}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default FiltersPreview;\n","import React, { Component } from 'react';\nimport ItemsQuery from \"./components/filters/items-query\";\nimport TimeQuery from \"./components/filters/time-query\";\nimport IPvQuery from \"./components/filters/ipv-query\";\nimport PathsTable from \"./components/tables/paths-table\";\nimport PathChart from \"./components/viewers/path-chart\";\nimport PathInfo from \"./components/viewers/path-info\";\nimport ForceDirectedGraph from \"./components/graphs/force-directed-graph\";\nimport {dispatchUrl, packUrl} from \"./utils/common\";\nimport RequestLoader from \"./components/loaders/request\";\nimport FiltersPreview from \"./components/filters/preview\";\nimport './App.css';\n\nimport { config } from './constants'\n\nclass App extends Component {\n\n  constructor (props) {\n    super(props);\n\n    this.state = {\n      responseData: null,\n      pathsStats: null,\n      currentUrl: \"\",\n      interruptedUrl: \"\",\n      query: {\n        datetimeFrom: null,\n        datetimeTo: null,\n        sources: [],\n        sources_hosts: [],\n        destinations: [],\n        destinations_hosts: [],\n        virtual_organisations: [], // not here yet\n        IPv6: false\n      },\n      pathInfo: {\n        filterWrongMeasurements: false\n      },\n      pathTableData: null,\n      graphVisualisation: {\n        threeDimensions: false,\n        linksPower: 1,\n        showMissedHops: false\n      },\n      graphNavigation: {\n        selectedPath: null\n      },\n      pathNavigation: {\n        selectedHop: null\n      }\n    };\n\n    this.pathChartRef = React.createRef();\n    this.queryContainerRef = React.createRef();\n\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handlePathSelected = this.handlePathSelected.bind(this);\n    this.handleHopSelected = this.handleHopSelected.bind(this);\n    this.handleHideShow = this.handleHideShow.bind(this);\n\n    this.getData = this.getData.bind(this);\n  }\n\n  async componentDidMount() {\n    let urlParams = window.location.search;\n    let query;\n    let response;\n    let response_content;\n\n    if (!urlParams.length) {\n      response = await fetch(`${config.url.API_URL}query`); // Fixme to config\n      response_content = await response.json();\n      query = {...this.state.query};\n      query.datetimeFrom = new Date(response_content[\"datetime_range\"][0]);\n      query.datetimeTo = new Date(response_content[\"datetime_range\"][1])\n    } else {\n      response = await fetch(`${config.url.API_URL}query${urlParams}`); // Fixme to config\n      response_content = await response.json();\n      query = dispatchUrl(urlParams);\n    }\n\n    if (response_content.status) {\n      urlParams = packUrl(query);\n      const currentUrl = `${config.url.API_URL}query${urlParams}`; // Fixme to config\n      window.history.pushState(null, 'queried', window.location.origin + urlParams);\n      const responseData = response_content['es_data'];\n      const pathsStats = response_content['stats'];\n      this.setState({query, responseData, pathsStats, currentUrl})\n    } else {\n      alert(JSON.stringify(response_content.message))\n    }\n  }\n\n  handleQueryChange(query) {\n    this.setState({query})\n  }\n\n  handlePathSelected(pathID) {\n    const {graphNavigation} = this.state;\n    if (pathID === graphNavigation.selectedPath) {\n      graphNavigation.selectedPath = null;\n    } else {\n      graphNavigation.selectedPath = pathID;\n    }\n    this.setState({graphNavigation})\n  }\n\n  handleHopSelected(pathNavigation) {\n    this.setState({pathNavigation})\n  }\n\n  async getData() {\n    const query = this.state.query;\n    const urlParams = packUrl(query);\n    let url;\n\n    const loader = document.getElementById(\"loader\");\n    loader.classList.remove(\"hidden\");\n\n    url = `${config.url.API_URL}query${urlParams}`;\n    window.history.pushState(null, 'queried', window.location.origin + urlParams);\n    if (url !== this.state.currentUrl) {\n      await fetch(url)\n        .then(res => res.json())\n        .then(responseData => {\n          if (responseData.status) {\n            if (responseData[\"number_of_paths\"] > 50) {\n              let answer = window.confirm(`Number of paths is ${responseData[\"number_of_paths\"]}, which is not recommended for rendering. Are you sure you want to continue?`);\n              if (answer) {\n                this.setState({pathsStats: responseData['stats']});\n                this.setState({responseData: responseData['es_data']});\n              }\n            } else {\n              this.setState({pathsStats: responseData['stats']});\n              this.setState({responseData: responseData['es_data']});\n            }\n          } else {\n            alert(JSON.stringify(responseData.message))\n          }\n        });\n\n      this.setState({currentUrl: url})\n    }\n\n    loader.classList.add(\"hidden\");\n  }\n\n  handleHideShow() {\n    const classList = this.queryContainerRef.current.classList;\n    if (classList.contains(\"opened\")) {\n      classList.remove(\"opened\")\n    } else {\n      classList.add(\"opened\")\n    }\n  }\n\n  render() {\n    if (this.state.responseData === null) {\n      return (\n        <RequestLoader hidden={false}/>\n      )\n    }\n\n    let itemsFilters = [\n      {title: \"Sources\", id: \"sources\"},\n      {title: \"Sources hosts\", id: \"sources_hosts\"},\n      {title: \"Destinations\", id: \"destinations\"},\n      {title: \"Destinations hosts\", id: \"destinations_hosts\"}\n    ];\n\n    return (\n      <div className={\"app-wrapper\"}>\n        <FiltersPreview\n          queryContainer={this.queryContainerRef}\n          query={this.state.query}\n          itemsFilters={itemsFilters}\n          triggerRequest={this.getData}\n        />\n        <div ref={this.queryContainerRef} className={\"query-container opened\"} onMouseLeave={this.getData}>\n          <div className={\"query-container-inner\"}>\n            <div id={\"query-switcher\"}>\n              <button onClick={this.handleHideShow}>\n                <i className=\"im im-arrow-right\"/>\n              </button>\n            </div>\n            <div className={\"query-container-body\"}>\n              <TimeQuery\n                query={this.state.query}\n                onQueryChange={this.handleQueryChange}\n              />\n              <div className={\"query-separator\"}/>\n              <IPvQuery\n                query={this.state.query}\n                onQueryChange={this.handleQueryChange}\n              />\n              <div className={\"query-separator\"}/>\n              <ItemsQuery\n                query={this.state.query}\n                itemsFilters={itemsFilters}\n                aggregations={this.state.responseData.aggregations}\n                onQueryChange={this.handleQueryChange}\n              />\n            </div>\n          </div>\n        </div>\n        <div className={\"table-container\"}>\n          <PathsTable\n            paths={this.state.responseData['hits']['hits']}\n            onPathSelected={this.handlePathSelected}\n            selectedPath={this.state.graphNavigation.selectedPath}\n            onHopSelected={this.handleHopSelected}\n          />\n        </div>\n        <div className={\"path-chart-container\"}>\n          <PathChart\n            pathChartRef={this.pathChartRef}\n            pathInfo={this.state.pathInfo}\n            paths={this.state.responseData['hits']['hits']}\n            selectedPath={this.state.graphNavigation.selectedPath}\n            onHopSelected={this.handleHopSelected}\n          />\n        </div>\n        <div className={\"path-info-container\"}>\n          <PathInfo\n            pathChart={this.pathChartRef}\n            pathInfo={this.state.pathInfo}\n            paths={this.state.responseData['hits']['hits']}\n            pathsStats={this.state.pathsStats}\n            selectedPath={this.state.graphNavigation.selectedPath}\n            selectedHop={this.state.pathNavigation.selectedHop}\n            onHopSelected={this.handleHopSelected}\n          />\n        </div>\n        <div id={\"graph-container\"}>\n          <ForceDirectedGraph\n            responseData={this.state.responseData}\n            pathsStats={this.state.pathsStats}\n            graphVisualisation={this.state.graphVisualisation}\n            graphNavigation={this.state.graphNavigation}\n            pathNavigation={this.state.pathNavigation}\n            onHopSelected={this.handleHopSelected}\n            onPathSelected={this.handlePathSelected}\n            selectedPath={this.state.graphNavigation.selectedPath}\n            selectedHop={this.state.pathNavigation.selectedHop}\n          />\n        </div>\n        <RequestLoader hidden={true}/>\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}